<meta charset="utf-8" lang="en"><style class="fallback">body{visibility:hidden;}</style><!--
If you are reading this you are not browsing this file as intended. please visit https://raw.githack.com/r-lyeh/FWK/master/fwk.html instead
-->


<style>
/* original .css from: https://autodesk.github.io/standard-surface/style/style.css */

/******************************************************************************/
/* Fonts
/******************************************************************************/

@font-face {
  font-family: 'Artifakt Legend';
  font-style: normal;
  font-weight: 700;
  src: url('https://autodesk.github.io/standard-surface/style/fonts/Artifakt/Artifakt Legend Bold.woff2') format('woff2');
}

@font-face {
  font-family: 'Artifakt Element';
  font-style: normal;
  font-weight: 400;
  src: url('https://autodesk.github.io/standard-surface/style/fonts/Artifakt/Artifakt Element Regular.woff2') format('woff2');
}

@font-face {
  font-family: 'Artifakt Element';
  font-style: normal;
  font-weight: 500;
  src: url('https://autodesk.github.io/standard-surface/style/fonts/Artifakt/Artifakt Element Medium.woff2') format('woff2');
}

@font-face {
  font-family: 'Artifakt Element';
  font-style: normal;
  font-weight: 700;
  src: url('https://autodesk.github.io/standard-surface/style/fonts/Artifakt/Artifakt Element Bold.woff2') format('woff2');
}

@font-face {
  font-family: 'Roboto Mono';
  font-style: normal;
  font-weight: 400;
  src: local('Roboto Mono'), local('RobotoMono-Regular'), url('https://autodesk.github.io/standard-surface/style/fonts/RobotoMono/RobotoMono-Regular.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD; /* Latin */
}

@font-face {
  font-family: 'Roboto Mono';
  font-style: normal;
  font-weight: 700;
  src: local('Roboto Mono Bold'), local('RobotoMono-Bold'), url('https://autodesk.github.io/standard-surface/style/fonts/RobotoMono/RobotoMono-Bold.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD; /* Latin */
}

@font-face {
  font-family: 'PT Serif';
  font-style: italic;
  font-weight: 400;
  src: local('PT Serif Italic'), local('PTSerif-Italic'), url('https://autodesk.github.io/standard-surface/style/fonts/PTSerif/PTSerif-Italic.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD; /* Latin */
}

@font-face {
  font-family: 'PT Serif';
  font-style: normal;
  font-weight: 400;
  src: local('PT Serif'), local('PTSerif-Regular'), url('https://autodesk.github.io/standard-surface/style/fonts/PTSerif/PTSerif-Regular.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD; /* Latin */
}

@font-face {
  font-family: 'PT Serif';
  font-style: normal;
  font-weight: 700;
  src: local('PT Serif Bold'), local('PTSerif-Bold'), url('https://autodesk.github.io/standard-surface/style/fonts/PTSerif/PTSerif-Bold.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD; /* Latin */
}

/******************************************************************************/
/* Document body
/******************************************************************************/

body
{
    max-width: 800px;
    font-family: 'Artifakt Element', sans-serif; /*'PT Serif', serif;*/ /*<@r-lyeh*/
    padding: 70px 10px 0px 10px;
    min-width: 260px;
    font-size: 16px; /*16px;*/ /*<@r-lyeh*/
    line-height: 19px; /*21px*/ /*<@r-lyeh*/
    color: rgb(224,224,255); /*black;*/ /*<@r-lyeh*/

    background-color: rgb(40,40,40); /*<@r-lyeh*/
}

@media print
{
    body
    {
        max-width: 100%;
        padding: 0 5%;
    }
}

/******************************************************************************/
/* Table of contents
/******************************************************************************/

/* For screens wide enough, put on the left side */
@media screen and (min-width: 1100px) /*<@r-lyeh*/
{
    .md .longTOC, .md .mediumTOC, .md .shortTOC
    {
        max-width: 300px; /*<@r-lyeh*/
        left: 1em; /*right: 0em;*/ /*<@r-lyeh*/
        display: block;
        position: fixed;
        top: 0;
        bottom: 0;
        margin-top: 0;
        margin-bottom: 0;
        padding: 1em 1em 0 0;
        font-size: 85%;
        line-height: 120%;
        border: 0;
        opacity: 0.66;
        font-family: 'Artifakt Element', sans-serif;
    }

    .md .longTOC, .md .mediumTOC
    {
        overflow-y: hidden; /*< @r-lyeh*/
        /* https://css-tricks.com/scrollbars-on-hover/
        overflow-y: scroll;
        mask-image: linear-gradient(to top, transparent, black), linear-gradient(to left, transparent 17px, black 17px);
        mask-size: 100% 20000px;
        mask-position: left bottom;
        -webkit-mask-image: linear-gradient(to top, transparent, black), linear-gradient(to left, transparent 17px, black 17px);
        -webkit-mask-size: 100% 20000px;
        -webkit-mask-position: left bottom;
        transition: mask-position 0.3s, -webkit-mask-position 0.3s;
        */
    }

    .md .longTOC a, .md .mediumTOC a, .md .shortTOC a
    {
        font-family: 'Artifakt Element', sans-serif;
    }

    .md .longTOC:hover, .md .mediumTOC:hover, .md .shortTOC:hover
    {
        opacity: 1;
    }
}

/* For narrow screens, make inline */
@media screen and (max-width: 1099px) /*<@r-lyeh*/
{
    .md .longTOC, .md .mediumTOC, .md .shortTOC
    {
        display: block;
        margin: 20px 0 40px 3px;
        padding: 0;
        padding-top: 13px;
        float: initial;
        font-size: 98%;
        line-height: 120%;
        border: 0;
        font-family: 'Artifakt Element', sans-serif;
        border-top: 1px solid rgba(0,0,0,.1);
        border-bottom: 1px solid rgba(0,0,0,.1);
    }

    .md .longTOC a, .md .mediumTOC a, .md .shortTOC a
    {
        font-family: 'Artifakt Element', sans-serif;
    }
}

/* For print, hide */
@media print
{
    .md .longTOC, .md .mediumTOC, .md .shortTOC
    {
        display: none;
    }
}

.md div.title
{
    font-family: 'Artifakt Legend', sans-serif;
    font-weight: 700;
    border: 0;
}

contents, .md .tocHeader,
.md h1, .md h2, .md h3, .md h4, .md h5, .md h6,
.md .nonumberh1, .md .nonumberh2, .md .nonumberh3, .md .nonumberh4, .md .nonumberh5, .md .nonumberh6
{
    font-family: 'Artifakt Element', sans-serif;
    font-weight: 500;
    border: 0;
}

.md .tocHeader
{
    margin: 0;
    padding: 0;
    border: none;
    font-size: inherit;
}

.md .longTOC p, .md .mediumTOC p, .md .shortTOC p
{
    overflow: hidden;
    text-overflow: ellipsis;
}

.md .longTOC center, .md .mediumTOC center, .md .shortTOC center, .md .tocHeader
{
    text-align: left;
}

.md .longTOC b, .md .mediumTOC b, .md .shortTOC b
{
    font-weight: 500;
    font-size: 120%;
}

.md .longTOC a.level1, .md .mediumTOC a.level1, .md .shortTOC a.level1
{
    display: inline-block;
    color: rgba(255,255,255,.95); /*rgba(0,0,0,.95);*/ /*<@r-lyeh*/
    font-weight: 500;
    margin-top: 7px;
    margin-bottom: 4px;
}

.md .longTOC a.level2, .md .mediumTOC a.level2, .md .shortTOC a.level2
{
    color: rgba(255,255,255,.9); /*rgba(0,0,0,.9);*/ /*<@r-lyeh*/
    font-weight: 400;
    line-height: 130%;
}


/******************************************************************************/
/* Titles and headings
/******************************************************************************/

/* Title style */
.md div.title
{
    color: rgba(255,255,255,.7); /*rgba(0,0,0,.7);*/ /*<@r-lyeh*/
    margin: 0.4em 0 20px 0; /*0.4em 0 20px 0;*/ /*<@r-lyeh*/
    padding: 0;
    font-size: 230%;
    font-weight: 700;
    text-align: center;
}

/* Subtitle style */
.md div.subtitle
{
    text-align: center;
    font-size: 95%;
}

/* Blue sections */
.md h1, .md .nonumberh1
{
    font-size: 150%;
    color: #029be5;
}

/* Grey sub-sections */
.md h2, .md .nonumberh2, .md h3, .md .nonumberh3
{
    font-size: 130%;
    color: rgba(255,255,255,.7); /*rgba(0,0,0,.7);*/ /*<@r-lyeh*/
}

.md h3, .md .nonumberh3
{
    font-size: 115%;
    margin-bottom: 0;
    color: rgba(255,255,255,.75); /*rgba(0,0,0,.75);*/ /*<@r-lyeh*/
}

/******************************************************************************/
/* Tables
/******************************************************************************/

.md table.table
{
    font-size: 90%;
    width: 100%;
    border: 1px solid rgb(30,30,30); /*(230,230,230)*/ /*<@r-lyeh*/
}

.md table.table td
{
    border: none;
    padding: 7px 7px 7px 7px;
}

/* Header row */
.md table.table th
{
    border: none;
    background-color: rgb(0,207,156); /*(230,230,230)*/ /*<@r-lyeh*/
    color: rgb(20,20,20); /*black;*/ /*<@r-lyeh*/
    font-weight: 700;
    font-family: 'Artifakt Element', sans-serif;
    padding: 7px 7px 7px 7px;
}

/* Even table rows: 1, 3, ... */
.md table.table tr:nth-child(odd)
{
    background-color: rgb(53,53,53); /*(247,247,247);*/ /*<@r-lyeh*/
}

/* Odd table rows: 2, 4, ... */
.md table.table tr:nth-child(even)
{
    background-color: rgb(47,47,47); /*(253,253,253);*/ /*<@r-lyeh*/
}

.md table.table tr:hover
{
    background-color: rgb(66,66,66); /*#f9f5d7;*/ /*<@r-lyeh*/
}


/******************************************************************************/
/* Links
/******************************************************************************/

.md a
{
    /*font-family: 'PT Serif';*/
}

.md a:link, .md a:visited
{
    color: #00C0FF /* #0085c7; */ /*<@r-lyeh*/
}

/* For print, make links black */
@media print
{
    .md a:link, .md a:visited
    {
        color: black;
    }
}

/******************************************************************************/
/* Misc
/******************************************************************************/

/* Code */
.md code
{
    padding: 0;
    border: none;
    font-family: 'Roboto Mono', monospace;
    font-size: 92%;

    overflow-x: hidden;  /*<@r-lyeh*/
}

.md pre.listing
{
    background-color: transparent;
    font-size: 93%;
    background-color: rgb(250,250,250);
    border: 1px solid rgba(0,0,0,.05);
    padding: 6px 10px;
    text-align: left;

    overflow-x: hidden;  /*<@r-lyeh*/
    width: 97%; /*hack, i dont know how to align this width with every other element <@r-lyeh*/
}

/* Bibliography */
.md .bib
{
    font-size: 90%;
    padding-left: 20px;
    text-indent: -20px;
}
.md .bib b
{
    font-weight: inherit;
    font-style: italic;
}

hr.pagebreak
{
    visibility: hidden;
}

.afterTitles
{
    height: 50px !important;
}

/* Center short image captions */
.md div.table
{
    margin: 0 0 30px 0; /*0 0 30px 0;*/ /*<@r-lyeh*/
}

.md div.tablecaption
{
    text-align: justify;
}

/* Center short image captions */
.md div.imagecaption
{
    display: inline-block;
    margin: 7px 0 0 0;
}

.md img.markdeep
{
    margin-top: 25px;
}

.md .subtitle img.markdeep
{
    margin-top: 7px;
}

.md .imagecaption b
{
    font-weight: 700;
    color: rgba(255,255,255,.85); /*rgba(0,0,0,.85);*/ /*<@r-lyeh*/
}

/* Hack to place a caption below a table of images */
.shifted-caption
{
    margin-top: -30px;
    text-align: center;
}
.shifted-caption .image
{
    float: initial !important;
    margin: 0 !important;
}
.shifted-caption img
{
    display: none;
}

.markdeepFooter
{
    opacity: 0.4;
}

.md code .long
{
    font-size: 88%;
}

/* For print, hide Markdeep footer */
@media print
{
    .markdeepFooter
    {
        display: none;
    }
}




.md .admonition { background-color:rgba(68,138,255,0.45); } /* .15); }*/ /*<@r-lyeh*/
.md .admonition.tip { background-color:rgba(50,255,90,0.55); } /* .15); }*/ /*<@r-lyeh*/
.md .admonition.warn,.md .admonition.warning { background-color:rgba(255,125,0,0.85); } /* 255,145,0,0.15); }*/ /*<@r-lyeh*/
.md .admonition.error { background-color:rgba(255,23,68,0.65); } /* .15); }*/ /*<@r-lyeh*/




/* Stylize details/summary html tags */
/* Credits:  https://dev.to/vtrpldn/show-and-hide-content-easily-with-details-and-summary-html-tags-3eif */

/* The --padding variable help us control the <details> and <summary> spacing */
:root {
  --padding: 4px; /*16px;*/ /*<@r-lyeh*/
}
details {
  padding: 0 var(--padding);
  box-shadow: inset 0 0 0 0px; /*4px;*/ /*<@r-lyeh*/
  border-radius: 1px; /*4px*/ /*<@r-lyeh*/

    background-color:#333; /*<@r-lyeh*/
    margin: -15px 0 0 0; /*<@r-lyeh*/ /*fits all <details> together */
}
summary {
    padding-left: 16px; /*<@r-lyeh*/
}
details[open] {
  padding-bottom: var(--padding);
  box-shadow: inset 0 0 0 1px; /*<@r-lyeh*/

    background-color:transparent; /*<@r-lyeh*/
}
details > summary {
  display: flex;
  padding: var(--padding);
  margin: 0 calc(var(--padding) * -1);
  border-radius: 4px;
  /*font-size: 24px;*/ /*<@r-lyeh*/
  cursor: pointer;
  justify-content: space-between;
  list-style: none; /* Hides the default arrow */
}
details[open] > summary {
  box-shadow: 0 0px; /*4px;*/ /*<@r-lyeh*/
}
/* Adds an (+) icon when the <details> is closed... */
details > summary::after {
  content: "⇕";
}
/* ...and switches it when <details> is open (-) icon */
details[open] > summary::after {
  content: "⇕";
}
/* Removes the ugly default arrow on Chrome */
details > summary::-webkit-details-marker {
  display: none;
}


</style>

<!--/*<@r-lyeh*/-->
<!--link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/base16/horizon-dark.min.css" /-->
<!--
tested: 
    monokai, agate, 
    >>night-owl >tomorrow-night-blue
    atom-one-dark-reasonable,srcery,snazzy,framer,hybrid,monokai-sublime,github-dark-dimmed
base16/
    rebecca,mocha,materia,material-palenight,material,monokai,papercolor-dark,horizon-dark,
-->
<style>
/* .hljs-comment,.hljs-quote{color:#969896}.hljs-variable,.hljs-template-variable,.hljs-tag,.hljs-name,.hljs-selector-id,.hljs-selector-class,.hljs-regexp,.hljs-deletion{color:#cc6666}.hljs-number,.hljs-built_in,.hljs-builtin-name,.hljs-literal,.hljs-type,.hljs-params,.hljs-meta,.hljs-link{color:#de935f}.hljs-attribute{color:#f0c674}.hljs-string,.hljs-symbol,.hljs-bullet,.hljs-addition{color:#b5bd68}.hljs-title,.hljs-section{color:#81a2be}.hljs-keyword,.hljs-selector-tag{color:#b294bb}.hljs{display:block;overflow-x:auto;background:#1d1f21;color:#c5c8c6;padding:0.5em}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:bold} */
/*.hljs{display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd}.hljs-tag,.hljs-keyword,.hljs-selector-tag,.hljs-literal,.hljs-strong,.hljs-name{color:#f92672}.hljs-code{color:#66d9ef}.hljs-class .hljs-title{color:white}.hljs-attribute,.hljs-symbol,.hljs-regexp,.hljs-link{color:#bf79db}.hljs-string,.hljs-bullet,.hljs-subst,.hljs-title,.hljs-section,.hljs-emphasis,.hljs-type,.hljs-built_in,.hljs-builtin-name,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-addition,.hljs-variable,.hljs-template-tag,.hljs-template-variable{color:#a6e22e}.hljs-comment,.hljs-quote,.hljs-deletion,.hljs-meta{color:#75715e}.hljs-keyword,.hljs-selector-tag,.hljs-literal,.hljs-doctag,.hljs-title,.hljs-section,.hljs-type,.hljs-selector-id{font-weight:bold}*/
/*.hljs{display:block;overflow-x:auto;padding:0.5em;background:#333;color:white}.hljs-name,.hljs-strong{font-weight:bold}.hljs-code,.hljs-emphasis{font-style:italic}.hljs-tag{color:#62c8f3}.hljs-variable,.hljs-template-variable,.hljs-selector-id,.hljs-selector-class{color:#ade5fc}.hljs-string,.hljs-bullet{color:#a2fca2}.hljs-type,.hljs-title,.hljs-section,.hljs-attribute,.hljs-quote,.hljs-built_in,.hljs-builtin-name{color:#ffa}.hljs-number,.hljs-symbol,.hljs-bullet{color:#d36363}.hljs-keyword,.hljs-selector-tag,.hljs-literal{color:#fcc28c}.hljs-comment,.hljs-deletion,.hljs-code{color:#888}.hljs-regexp,.hljs-link{color:#c6b4f0}.hljs-meta{color:#fc9b9b}.hljs-deletion{background-color:#fc9b9b;color:#333}.hljs-addition{background-color:#a2fca2;color:#333}.hljs a{color:inherit}.hljs a:focus,.hljs a:hover{color:inherit;text-decoration:underline}*/
.hljs{display:block;overflow-x:auto;padding:.5em;background:#011627;color:#d6deeb}.hljs-keyword{color:#c792ea;font-style:italic}.hljs-built_in{color:#addb67;font-style:italic}.hljs-type{color:#82aaff}.hljs-literal{color:#ff5874}.hljs-number{color:#f78c6c}.hljs-regexp{color:#5ca7e4}.hljs-string{color:#ecc48d}.hljs-subst{color:#d3423e}.hljs-symbol{color:#82aaff}.hljs-class{color:#ffcb8b}.hljs-function{color:#82aaff}.hljs-title{color:#dcdcaa;font-style:italic}.hljs-params{color:#7fdbca}.hljs-comment{color:#637777;font-style:italic}.hljs-doctag{color:#7fdbca}.hljs-meta{color:#82aaff}.hljs-meta-keyword{color:#82aaff}.hljs-meta-string{color:#ecc48d}.hljs-section{color:#82b1ff}.hljs-builtin-name,.hljs-name,.hljs-tag{color:#7fdbca}.hljs-attr{color:#7fdbca}.hljs-attribute{color:#80cbc4}.hljs-variable{color:#addb67}.hljs-bullet{color:#d9f5dd}.hljs-code{color:#80cbc4}.hljs-emphasis{color:#c792ea;font-style:italic}.hljs-strong{color:#addb67;font-weight:700}.hljs-formula{color:#c792ea}.hljs-link{color:#ff869a}.hljs-quote{color:#697098;font-style:italic}.hljs-selector-tag{color:#ff6363}.hljs-selector-id{color:#fad430}.hljs-selector-class{color:#addb67;font-style:italic}.hljs-selector-attr,.hljs-selector-pseudo{color:#c792ea;font-style:italic}.hljs-template-tag{color:#c792ea}.hljs-template-variable{color:#addb67}.hljs-addition{color:#addb67ff;font-style:italic}.hljs-deletion{color:#ef535090;font-style:italic}
</style>
<style>
/* Remove numbers from headers */
/* .md h1:before, .md h2:before, .md h3:before, .md h4:before, .md h5:before {content: none;} */
/* Examples background and text to match Observable Dark */
/*.md code { color:#f00; }*/
.md pre.listing.tilde {background-color:#333; color:#FFF;}
/* Change color of diagrams and darken circle around open dots */
/*.md svg.diagram {stroke: #C5C5C5; fill: #C5C5C5;}*/
/*.md svg.diagram .opendot {stroke: #858585; fill: #FFF;}*/
/* Grey shade multi-block example */
/* .md code > .output {background: #979797;} */
/* highlight.js brighten function and title names */
.hljs-function .hljs-title {color: #00C0FF;}
.hljs-class .hljs-title {color: #00FFC0;}
.md code { color: rgb(255,255,235); } /* default unclassified #text and punctuation */
</style>

<script>
markdeepOptions = {
    tocStyle:'auto', // auto,none,short,medium,long
    definitionStyle:'auto',  // auto,short,long
    linkAPIDefinitions: true, // true
};</script>
</script>

<!-- Markdeep: --><script src="https://casual-effects.com/markdeep/latest/markdeep.min.js?" charset="utf-8"></script>

<script>
hljs.getLanguage('C').k/*eywords*/ += ' vec2 vec3 vec4 quat quat2'; // note the leading space
</script>
**[F·W·K (2021.9)](https://github.com/r-lyeh/FWK)**
 <!--p align="center">
  <img src="https://i.imgur.com/sInbRoA.gif"/>
 </p-->
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
# Glossary

## About

<!-- where and what,when,how much,why,who,how -->
- This is the documentation website for FWK.
- https://github.com/r-lyeh/FWK is a 3D game framework in C, started in 2020, with few new releases every year. Totally free, no licensing fees.
- Less is more. Minimalism everywhere: naming, language of choice, exposed API, no external deps, small repo size, etc.
- Need extra support? <a href="https://discord.gg/vu6Vt9d">Join us</a>.

![Image from demo.c](https://i.imgur.com/sInbRoA.gif)

~~~~~~C linenumbers
// Compact code style
#include "fwk.h"
int main(int argc, char **argv) {
    // Create window, 75% size, no extra flags
    window_create(75.0, 0);
    // Game loop
    while( window_swap() && !input(KEY_ESC) ) {
        puts("hello");
    }
}
~~~~~~

!!! Note
    While browsing documentation you'll find notes like this one.

!!! Tip
    This is a informational note however.

!!! WARNING
    This is a warning note.

!!! ERROR: Watch out
    Pay attention to these **error notes** always.

| Last modified | 2021/09/16  |
|:--------------|:------------|
|Commit:        | |
|Branch:        | |

<!-- 🅂 🅃 🄴 🄵 🅄 🄼 Ⓕ 🅕 🅔 🅢 🅣 🅜 -->
## 🅃 typedefs
## 🄴 enums
## 🅂 structs
## 🅄 unions
## 🄵 functions
[video_open](#api/video/video_open), [video_seek](#api/video/video_seek), [video_close](#api/video/video_close),
## 🄳 defines

# API
## video

<a name="api/video/video_open"></a>
<details><summary><code lang=C>API video_t video_open(char *filename, unsigned flags);</code></summary>

### video_open
Function that opens a video for displaying into a texture. 

- `filename`: video to open. 
- `flags`: `0` for now.
- Returns: `0` on success
- See also: [video_close](#api/video/video_close)
- Example:
~~~~~~C linenumbers
int main() {
    video_t v = video_open("my_video.mp4", 0);
}
~~~~~~

!!! Tip
    Use `WITH_VIDEO_YCBCR=1` directive to optimize video decoding.

!!! WARNING
    Fix me: *Audio decoder might exhaust buffers on Linux!*

</details>

<a name="api/video/video_seek"></a>
<details><summary><code lang=C>API int video_seek(video_t *video, double seek_ss);</code></summary>

### video_seek
Reposition the `video_t` stream. See also: [video_open](#api/video/video_open)

Argument|Description
-----|------
video|Video stream.
seek_ss|Reposition the video stream in `seek_ss` seconds from beginning.
return|1

~~~~~~C linenumbers
int main() {
    video_t *video = video_open("my_video.mp4", 0);
    video_seek(video, 3); // seek to 3s
}
~~~~~~
</details>

<a name="api/video/video_close"></a>
<details><summary><code lang=C>API int video_close(video_t *video);</code></summary>

### video_close
Close the `video_t` stream. See also: [video_open](#api/video/video_open)

Argument|Description
-----|------
video|Video stream.
return|1

~~~~~~C linenumbers
int main() {
    video_t *video = video_open("my_video.mp4", 0);
    video_close(video);
}
~~~~~~
</details>
## dll


~~~~~~C linenumbers
API void*dll(const char*filename,const char*symbol);
~~~~~~

## memory


~~~~~~C linenumbers
API void*xrealloc(void*p,size_t sz);
~~~~~~


~~~~~~C linenumbers
API size_t xsize(void*p);
~~~~~~


~~~~~~C linenumbers
API void*stack(int bytes);
~~~~~~


~~~~~~C linenumbers
API void*watch(void*ptr,int sz);
~~~~~~


~~~~~~C linenumbers
API void*forget(void*ptr);
~~~~~~

## math


~~~~~~C linenumbers
typedef union vec2{struct{float x,y;};struct{float r,g;};struct{float w,h;};struct{float min,max;};float v[1];}vec2;
~~~~~~


~~~~~~C linenumbers
typedef union vec3{struct{float x,y,z;};struct{float r,g,b;};struct{float w,h,d;};vec2 xy;vec2 rg;vec2 wh;float v[1];}vec3;
~~~~~~


~~~~~~C linenumbers
typedef union vec4{struct{float x,y,z,w;};struct{float r,g,b,a;};vec2 xy;vec3 xyz;vec2 rg;vec3 rgb;vec2 wh;vec3 whd;float v[1];}vec4;
~~~~~~


~~~~~~C linenumbers
typedef union quat{struct{float x,y,z,w;};vec3 xyz;vec4 xyzw;float v[1];}quat;
~~~~~~


~~~~~~C linenumbers
typedef float mat33[9];
~~~~~~


~~~~~~C linenumbers
typedef float mat34[12];
~~~~~~


~~~~~~C linenumbers
typedef float mat44[16];
~~~~~~


~~~~~~C linenumbers
typedef enum{axis_front,axis_back,axis_left,axis_right,axis_up,axis_down}coord_axis;
~~~~~~


~~~~~~C linenumbers
typedef union coord_system{struct{coord_axis x,y,z;};}coord_system;
~~~~~~


~~~~~~C linenumbers
API void randset(uint64_t state);
~~~~~~


~~~~~~C linenumbers
API uint64_t rand64(void);
~~~~~~


~~~~~~C linenumbers
API double randf(void);
~~~~~~


~~~~~~C linenumbers
API int randi(int mini,int maxi);
~~~~~~


~~~~~~C linenumbers
API float simplex1(float x);
~~~~~~


~~~~~~C linenumbers
API float simplex2(vec2 xy);
~~~~~~


~~~~~~C linenumbers
API float simplex3(vec3 xyz);
~~~~~~


~~~~~~C linenumbers
API float simplex4(vec4 xyzw);
~~~~~~


~~~~~~C linenumbers
API float ease_linear(float t);
~~~~~~


~~~~~~C linenumbers
API float ease_out_sine(float t);
~~~~~~


~~~~~~C linenumbers
API float ease_out_quad(float t);
~~~~~~


~~~~~~C linenumbers
API float ease_out_cubic(float t);
~~~~~~


~~~~~~C linenumbers
API float ease_out_quart(float t);
~~~~~~


~~~~~~C linenumbers
API float ease_out_quint(float t);
~~~~~~


~~~~~~C linenumbers
API float ease_out_expo(float t);
~~~~~~


~~~~~~C linenumbers
API float ease_out_circ(float t);
~~~~~~


~~~~~~C linenumbers
API float ease_out_back(float t);
~~~~~~


~~~~~~C linenumbers
API float ease_out_elastic(float t);
~~~~~~


~~~~~~C linenumbers
API float ease_out_bounce(float t);
~~~~~~


~~~~~~C linenumbers
API float ease_in_sine(float t);
~~~~~~


~~~~~~C linenumbers
API float ease_in_quad(float t);
~~~~~~


~~~~~~C linenumbers
API float ease_in_cubic(float t);
~~~~~~


~~~~~~C linenumbers
API float ease_in_quart(float t);
~~~~~~


~~~~~~C linenumbers
API float ease_in_quint(float t);
~~~~~~


~~~~~~C linenumbers
API float ease_in_expo(float t);
~~~~~~


~~~~~~C linenumbers
API float ease_in_circ(float t);
~~~~~~


~~~~~~C linenumbers
API float ease_in_back(float t);
~~~~~~


~~~~~~C linenumbers
API float ease_in_elastic(float t);
~~~~~~


~~~~~~C linenumbers
API float ease_in_bounce(float t);
~~~~~~


~~~~~~C linenumbers
API float ease_inout_sine(float t);
~~~~~~


~~~~~~C linenumbers
API float ease_inout_quad(float t);
~~~~~~


~~~~~~C linenumbers
API float ease_inout_cubic(float t);
~~~~~~


~~~~~~C linenumbers
API float ease_inout_quart(float t);
~~~~~~


~~~~~~C linenumbers
API float ease_inout_quint(float t);
~~~~~~


~~~~~~C linenumbers
API float ease_inout_expo(float t);
~~~~~~


~~~~~~C linenumbers
API float ease_inout_circ(float t);
~~~~~~


~~~~~~C linenumbers
API float ease_inout_back(float t);
~~~~~~


~~~~~~C linenumbers
API float ease_inout_elastic(float t);
~~~~~~


~~~~~~C linenumbers
API float ease_inout_bounce(float t);
~~~~~~


~~~~~~C linenumbers
API float ease_inout_perlin(float t);
~~~~~~


~~~~~~C linenumbers
API float ease_ping_pong(float t,float(*fn1)(float),float(*fn2)(float));
~~~~~~


~~~~~~C linenumbers
API float ease_pong_ping(float t,float(*fn1)(float),float(*fn2)(float));
~~~~~~


~~~~~~C linenumbers
API float deg(float radians);
~~~~~~


~~~~~~C linenumbers
API float rad(float degrees);
~~~~~~


~~~~~~C linenumbers
API int mini(int a,int b);
~~~~~~


~~~~~~C linenumbers
API int maxi(int a,int b);
~~~~~~


~~~~~~C linenumbers
API int absi(int a);
~~~~~~


~~~~~~C linenumbers
API float minf(float a,float b);
~~~~~~


~~~~~~C linenumbers
API float maxf(float a,float b);
~~~~~~


~~~~~~C linenumbers
API float absf(float a);
~~~~~~


~~~~~~C linenumbers
API float pmodf(float a,float b);
~~~~~~


~~~~~~C linenumbers
API float signf(float a);
~~~~~~


~~~~~~C linenumbers
API float clampf(float v,float a,float b);
~~~~~~


~~~~~~C linenumbers
API float mixf(float a,float b,float t);
~~~~~~


~~~~~~C linenumbers
API vec2 ptr2(const float*a);
~~~~~~


~~~~~~C linenumbers
API vec2 neg2(vec2 a);
~~~~~~


~~~~~~C linenumbers
API vec2 add2(vec2 a,vec2 b);
~~~~~~


~~~~~~C linenumbers
API vec2 sub2(vec2 a,vec2 b);
~~~~~~


~~~~~~C linenumbers
API vec2 mul2(vec2 a,vec2 b);
~~~~~~


~~~~~~C linenumbers
API vec2 inc2(vec2 a,float b);
~~~~~~


~~~~~~C linenumbers
API vec2 dec2(vec2 a,float b);
~~~~~~


~~~~~~C linenumbers
API vec2 scale2(vec2 a,float b);
~~~~~~


~~~~~~C linenumbers
API vec2 div2(vec2 a,float b);
~~~~~~


~~~~~~C linenumbers
API vec2 pmod2(vec2 a,float b);
~~~~~~


~~~~~~C linenumbers
API vec2 min2(vec2 a,vec2 b);
~~~~~~


~~~~~~C linenumbers
API vec2 max2(vec2 a,vec2 b);
~~~~~~


~~~~~~C linenumbers
API vec2 abs2(vec2 a);
~~~~~~


~~~~~~C linenumbers
API vec2 floor2(vec2 a);
~~~~~~


~~~~~~C linenumbers
API vec2 fract2(vec2 a);
~~~~~~


~~~~~~C linenumbers
API vec2 ceil2(vec2 a);
~~~~~~


~~~~~~C linenumbers
API float dot2(vec2 a,vec2 b);
~~~~~~


~~~~~~C linenumbers
API vec2 refl2(vec2 a,vec2 b);
~~~~~~


~~~~~~C linenumbers
API float cross2(vec2 a,vec2 b);
~~~~~~


~~~~~~C linenumbers
API float len2sq(vec2 a);
~~~~~~


~~~~~~C linenumbers
API float len2(vec2 a);
~~~~~~


~~~~~~C linenumbers
API vec2 norm2(vec2 a);
~~~~~~


~~~~~~C linenumbers
API int finite2(vec2 a);
~~~~~~


~~~~~~C linenumbers
API vec2 mix2(vec2 a,vec2 b,float t);
~~~~~~


~~~~~~C linenumbers
API vec2 clamp2(vec2 v,float a,float b);
~~~~~~


~~~~~~C linenumbers
API vec3 ptr3(const float*a);
~~~~~~


~~~~~~C linenumbers
API vec3 vec23(vec2 a,float z);
~~~~~~


~~~~~~C linenumbers
API vec3 neg3(vec3 a);
~~~~~~


~~~~~~C linenumbers
API vec3 add3(vec3 a,vec3 b);
~~~~~~


~~~~~~C linenumbers
API vec3 sub3(vec3 a,vec3 b);
~~~~~~


~~~~~~C linenumbers
API vec3 mul3(vec3 a,vec3 b);
~~~~~~


~~~~~~C linenumbers
API vec3 inc3(vec3 a,float b);
~~~~~~


~~~~~~C linenumbers
API vec3 dec3(vec3 a,float b);
~~~~~~


~~~~~~C linenumbers
API vec3 scale3(vec3 a,float b);
~~~~~~


~~~~~~C linenumbers
API vec3 div3(vec3 a,float b);
~~~~~~


~~~~~~C linenumbers
API vec3 pmod3(vec3 a,float b);
~~~~~~


~~~~~~C linenumbers
API vec3 min3(vec3 a,vec3 b);
~~~~~~


~~~~~~C linenumbers
API vec3 max3(vec3 a,vec3 b);
~~~~~~


~~~~~~C linenumbers
API vec3 abs3(vec3 a);
~~~~~~


~~~~~~C linenumbers
API vec3 floor3(vec3 a);
~~~~~~


~~~~~~C linenumbers
API vec3 fract3(vec3 a);
~~~~~~


~~~~~~C linenumbers
API vec3 ceil3(vec3 a);
~~~~~~


~~~~~~C linenumbers
API vec3 cross3(vec3 a,vec3 b);
~~~~~~


~~~~~~C linenumbers
API float dot3(vec3 a,vec3 b);
~~~~~~


~~~~~~C linenumbers
API vec3 refl3(vec3 a,vec3 b);
~~~~~~


~~~~~~C linenumbers
API float len3sq(vec3 a);
~~~~~~


~~~~~~C linenumbers
API float len3(vec3 a);
~~~~~~


~~~~~~C linenumbers
API vec3 norm3(vec3 a);
~~~~~~


~~~~~~C linenumbers
API vec3 norm3sq(vec3 a);
~~~~~~


~~~~~~C linenumbers
API int finite3(vec3 a);
~~~~~~


~~~~~~C linenumbers
API vec3 mix3(vec3 a,vec3 b,float t);
~~~~~~


~~~~~~C linenumbers
API vec3 clamp3(vec3 v,float a,float b);
~~~~~~


~~~~~~C linenumbers
API void ortho3(vec3*left,vec3*up,vec3 v);
~~~~~~


~~~~~~C linenumbers
API vec4 ptr4(const float*a);
~~~~~~


~~~~~~C linenumbers
API vec4 vec34(vec3 a,float w);
~~~~~~


~~~~~~C linenumbers
API vec4 neg4(vec4 a);
~~~~~~


~~~~~~C linenumbers
API vec4 add4(vec4 a,vec4 b);
~~~~~~


~~~~~~C linenumbers
API vec4 sub4(vec4 a,vec4 b);
~~~~~~


~~~~~~C linenumbers
API vec4 mul4(vec4 a,vec4 b);
~~~~~~


~~~~~~C linenumbers
API vec4 inc4(vec4 a,float b);
~~~~~~


~~~~~~C linenumbers
API vec4 dec4(vec4 a,float b);
~~~~~~


~~~~~~C linenumbers
API vec4 scale4(vec4 a,float b);
~~~~~~


~~~~~~C linenumbers
API vec4 div4(vec4 a,float b);
~~~~~~


~~~~~~C linenumbers
API vec4 pmod4(vec4 a,float b);
~~~~~~


~~~~~~C linenumbers
API vec4 min4(vec4 a,vec4 b);
~~~~~~


~~~~~~C linenumbers
API vec4 max4(vec4 a,vec4 b);
~~~~~~


~~~~~~C linenumbers
API vec4 abs4(vec4 a);
~~~~~~


~~~~~~C linenumbers
API vec4 floor4(vec4 a);
~~~~~~


~~~~~~C linenumbers
API vec4 fract4(vec4 a);
~~~~~~


~~~~~~C linenumbers
API vec4 ceil4(vec4 a);
~~~~~~


~~~~~~C linenumbers
API float dot4(vec4 a,vec4 b);
~~~~~~


~~~~~~C linenumbers
API vec4 refl4(vec4 a,vec4 b);
~~~~~~


~~~~~~C linenumbers
API float len4sq(vec4 a);
~~~~~~


~~~~~~C linenumbers
API float len4(vec4 a);
~~~~~~


~~~~~~C linenumbers
API vec4 norm4(vec4 a);
~~~~~~


~~~~~~C linenumbers
API vec4 norm4sq(vec4 a);
~~~~~~


~~~~~~C linenumbers
API int finite4(vec4 a);
~~~~~~


~~~~~~C linenumbers
API vec4 mix4(vec4 a,vec4 b,float t);
~~~~~~


~~~~~~C linenumbers
API vec4 clamp4(vec4 v,float a,float b);
~~~~~~


~~~~~~C linenumbers
API quat idq();
~~~~~~


~~~~~~C linenumbers
API quat ptrq(const float*a);
~~~~~~


~~~~~~C linenumbers
API quat vec3q(vec3 a,float w);
~~~~~~


~~~~~~C linenumbers
API quat vec4q(vec4 a);
~~~~~~


~~~~~~C linenumbers
API quat negq(quat a);
~~~~~~


~~~~~~C linenumbers
API quat conjq(quat a);
~~~~~~


~~~~~~C linenumbers
API quat addq(quat a,quat b);
~~~~~~


~~~~~~C linenumbers
API quat subq(quat a,quat b);
~~~~~~


~~~~~~C linenumbers
API quat mulq(quat p,quat q);
~~~~~~


~~~~~~C linenumbers
API quat scaleq(quat a,float s);
~~~~~~


~~~~~~C linenumbers
API quat normq(quat a);
~~~~~~


~~~~~~C linenumbers
API float dotq(quat a,quat b);
~~~~~~


~~~~~~C linenumbers
API quat mixq(quat a,quat b,float t);
~~~~~~


~~~~~~C linenumbers
API quat slerpq(quat a,quat b,float s);
~~~~~~


~~~~~~C linenumbers
API quat rotationq(float deg,float x,float y,float z);
~~~~~~


~~~~~~C linenumbers
API quat mat44q(mat44 M);
~~~~~~


~~~~~~C linenumbers
API vec3 rotate3q_2(vec3 v,quat q);
~~~~~~


~~~~~~C linenumbers
API vec3 rotate3q(vec3 v,quat r);
~~~~~~


~~~~~~C linenumbers
API vec3 euler(quat q);
~~~~~~


~~~~~~C linenumbers
API quat eulerq(vec3 pyr_degrees);
~~~~~~


~~~~~~C linenumbers
API void scaling33(mat33 m,float x,float y,float z);
~~~~~~


~~~~~~C linenumbers
API void scale33(mat33 m,float x,float y,float z);
~~~~~~


~~~~~~C linenumbers
API void id33(mat33 m);
~~~~~~


~~~~~~C linenumbers
API void extract33(mat33 m,const mat44 m4);
~~~~~~


~~~~~~C linenumbers
API void copy33(mat33 m,const mat33 a);
~~~~~~


~~~~~~C linenumbers
API vec3 mulv33(mat33 m,vec3 v);
~~~~~~


~~~~~~C linenumbers
API void multiply33x2(mat33 m,const mat33 a,const mat33 b);
~~~~~~


~~~~~~C linenumbers
API void rotation33(mat33 m,float degrees,float x,float y,float z);
~~~~~~


~~~~~~C linenumbers
API void rotationq33(mat33 m,quat q);
~~~~~~


~~~~~~C linenumbers
API void rotate33(mat33 r,float degrees,float x,float y,float z);
~~~~~~


~~~~~~C linenumbers
API void compose33(mat33 m,quat r,vec3 s);
~~~~~~


~~~~~~C linenumbers
API void id34(mat34 m);
~~~~~~


~~~~~~C linenumbers
API void copy34(mat34 m,const mat34 a);
~~~~~~


~~~~~~C linenumbers
API void scale34(mat34 m,float s);
~~~~~~


~~~~~~C linenumbers
API void add34(mat34 m,mat34 n);
~~~~~~


~~~~~~C linenumbers
API void muladd34(mat34 m,mat34 n,float s);
~~~~~~


~~~~~~C linenumbers
API void add34x2(mat34 m,mat34 n,mat34 o);
~~~~~~


~~~~~~C linenumbers
API void lerp34(mat34 m,mat34 n,mat34 o,float alpha);
~~~~~~


~~~~~~C linenumbers
API void multiply34x2(mat34 m,const mat34 m0,const mat34 m1);
~~~~~~


~~~~~~C linenumbers
API void multiply34(mat34 m,const mat34 a);
~~~~~~


~~~~~~C linenumbers
API void multiply34x3(mat34 m,const mat34 a,const mat34 b,const mat34 c);
~~~~~~


~~~~~~C linenumbers
API void compose34(mat34 m,vec3 t,quat q,vec3 s);
~~~~~~


~~~~~~C linenumbers
API void invert34(mat34 m,const mat34 o);
~~~~~~


~~~~~~C linenumbers
API void scaling44(mat44 m,float x,float y,float z);
~~~~~~


~~~~~~C linenumbers
API void id44(mat44 m);
~~~~~~


~~~~~~C linenumbers
API void identity44(mat44 m);
~~~~~~


~~~~~~C linenumbers
API void copy44(mat44 m,const mat44 a);
~~~~~~


~~~~~~C linenumbers
API void multiply44x2(mat44 m,const mat44 a,const mat44 b);
~~~~~~


~~~~~~C linenumbers
API void multiply44x3(mat44 m,const mat44 a,const mat44 b,const mat44 c);
~~~~~~


~~~~~~C linenumbers
API void multiply44(mat44 m,const mat44 a);
~~~~~~


~~~~~~C linenumbers
API void ortho44(mat44 m,float l,float r,float b,float t,float n,float f);
~~~~~~


~~~~~~C linenumbers
API void frustum44(mat44 m,float l,float r,float b,float t,float n,float f);
~~~~~~


~~~~~~C linenumbers
API void perspective44(mat44 m,float fovy_degrees,float aspect,float nearp,float farp);
~~~~~~


~~~~~~C linenumbers
API void lookat44(mat44 m,vec3 eye,vec3 center,vec3 up);
~~~~~~


~~~~~~C linenumbers
API void translation44(mat44 m,float x,float y,float z);
~~~~~~


~~~~~~C linenumbers
API void translate44(mat44 m,float x,float y,float z);
~~~~~~


~~~~~~C linenumbers
API void relocate44(mat44 m,float x,float y,float z);
~~~~~~


~~~~~~C linenumbers
API void rotationq44(mat44 m,quat q);
~~~~~~


~~~~~~C linenumbers
API void rotation44(mat44 m,float degrees,float x,float y,float z);
~~~~~~


~~~~~~C linenumbers
API void rotate44(mat44 m,float degrees,float x,float y,float z);
~~~~~~


~~~~~~C linenumbers
API void scaling44(mat44 m,float x,float y,float z);
~~~~~~


~~~~~~C linenumbers
API void scale44(mat44 m,float x,float y,float z);
~~~~~~


~~~~~~C linenumbers
API void transpose44(mat44 m,const mat44 a);
~~~~~~


~~~~~~C linenumbers
API float det44(const mat44 M);
~~~~~~


~~~~~~C linenumbers
API bool invert44(mat44 T,const mat44 M);
~~~~~~


~~~~~~C linenumbers
API vec4 transform444(const mat44,const vec4);
~~~~~~


~~~~~~C linenumbers
API bool unproject44(vec3*out,vec3 xyd,vec4 viewport,mat44 mvp);
~~~~~~


~~~~~~C linenumbers
API vec3 transform_axis(const coord_system,const coord_axis);
~~~~~~


~~~~~~C linenumbers
API void rebase44(mat44 m,const coord_system src_basis,const coord_system dst_basis);
~~~~~~


~~~~~~C linenumbers
API void compose44(mat44 m,vec3 t,quat q,vec3 s);
~~~~~~


~~~~~~C linenumbers
API vec3 transform33(mat33 m,vec3 p);
~~~~~~


~~~~~~C linenumbers
API vec4 transform444(const mat44 m,const vec4 p);
~~~~~~


~~~~~~C linenumbers
API vec3 transform344(const mat44 m,const vec3 p);
~~~~~~


~~~~~~C linenumbers
API vec3 transformq(const quat q,const vec3 v);
~~~~~~


~~~~~~C linenumbers
API vec3 transform_axis(const coord_system basis,const coord_axis to);
~~~~~~


~~~~~~C linenumbers
API vec3 transform_vector(const mat44 m,const vec3 vector);
~~~~~~


~~~~~~C linenumbers
API vec3 transform_point(const mat44 m,const vec3 p);
~~~~~~


~~~~~~C linenumbers
API vec3 transform_tangent(const mat44 m,const vec3 tangent);
~~~~~~


~~~~~~C linenumbers
API vec3 transform_normal(const mat44 m,const vec3 normal);
~~~~~~


~~~~~~C linenumbers
API quat transform_quat(const mat44 m,const quat q);
~~~~~~


~~~~~~C linenumbers
API float*transform_matrix(mat44 out,const mat44 m,const mat44 matrix);
~~~~~~


~~~~~~C linenumbers
API vec3 transform_scaling(const mat44 m,const vec3 scaling);
~~~~~~


~~~~~~C linenumbers
API void print2(vec2 v);
~~~~~~


~~~~~~C linenumbers
API void print3(vec3 v);
~~~~~~


~~~~~~C linenumbers
API void print4(vec4 v);
~~~~~~


~~~~~~C linenumbers
API void printq(quat q);
~~~~~~


~~~~~~C linenumbers
API void print33(float*m);
~~~~~~


~~~~~~C linenumbers
API void print34(float*m);
~~~~~~


~~~~~~C linenumbers
API void print44(float*m);
~~~~~~

## collide


~~~~~~C linenumbers
typedef struct gjk_support{int aid,bid;vec3 a;vec3 b;}gjk_support;
~~~~~~


~~~~~~C linenumbers
typedef struct gjk_vertex{vec3 a;vec3 b;vec3 p;int aid,bid;}gjk_vertex;
~~~~~~


~~~~~~C linenumbers
typedef struct gjk_simplex{int max_iter,iter;int hit,cnt;gjk_vertex v[4];float bc[4],D;}gjk_simplex;
~~~~~~


~~~~~~C linenumbers
typedef struct gjk_result{int hit;vec3 p0;vec3 p1;float distance_squared;int iterations;}gjk_result;
~~~~~~


~~~~~~C linenumbers
int gjk(gjk_simplex*s,const gjk_support*sup,vec3*dv);
~~~~~~


~~~~~~C linenumbers
gjk_result gjk_analyze(const gjk_simplex*s);
~~~~~~


~~~~~~C linenumbers
gjk_result gjk_quad(float a_radius,float b_radius);
~~~~~~


~~~~~~C linenumbers
typedef struct line{vec3 a,b;}line;
~~~~~~


~~~~~~C linenumbers
typedef struct sphere{vec3 c;float r;}sphere;
~~~~~~


~~~~~~C linenumbers
typedef struct aabb{vec3 min,max;}aabb;
~~~~~~


~~~~~~C linenumbers
typedef struct plane{vec3 p,n;}plane;
~~~~~~


~~~~~~C linenumbers
typedef struct capsule{vec3 a,b;float r;}capsule;
~~~~~~


~~~~~~C linenumbers
typedef struct ray{vec3 p,d;}ray;
~~~~~~


~~~~~~C linenumbers
typedef struct triangle{vec3 p0,p1,p2;}triangle;
~~~~~~


~~~~~~C linenumbers
typedef struct poly{vec3*verts;int cnt;}poly;
~~~~~~


~~~~~~C linenumbers
typedef union frustum{struct{vec4 l,r,t,b,n,f;};vec4 pl[6];float v[24];}frustum;
~~~~~~


~~~~~~C linenumbers
typedef struct hit{union{float depth;struct{float t0,t1;};struct{int hits;vec3 p0,p1;float distance2;int iterations;};};union{vec3 p;vec3 contact_point;};union{vec3 n;vec3 normal;};}hit;
~~~~~~


~~~~~~C linenumbers
API float line_distance2_point(line l,vec3 p);
~~~~~~


~~~~~~C linenumbers
API vec3 line_closest_point(line l,vec3 p);
~~~~~~


~~~~~~C linenumbers
API float ray_test_plane(ray r,vec4 p4);
~~~~~~


~~~~~~C linenumbers
API float ray_test_triangle(ray r,triangle t);
~~~~~~


~~~~~~C linenumbers
API int ray_test_sphere(float*t0,float*t1,ray r,sphere s);
~~~~~~


~~~~~~C linenumbers
API int ray_test_aabb(float*t0,float*t1,ray r,aabb a);
~~~~~~


~~~~~~C linenumbers
API hit*ray_hit_plane(ray r,plane p);
~~~~~~


~~~~~~C linenumbers
API hit*ray_hit_triangle(ray r,triangle t);
~~~~~~


~~~~~~C linenumbers
API hit*ray_hit_sphere(ray r,sphere s);
~~~~~~


~~~~~~C linenumbers
API hit*ray_hit_aabb(ray r,aabb a);
~~~~~~


~~~~~~C linenumbers
API vec3 sphere_closest_point(sphere s,vec3 p);
~~~~~~


~~~~~~C linenumbers
API hit*sphere_hit_aabb(sphere s,aabb a);
~~~~~~


~~~~~~C linenumbers
API hit*sphere_hit_capsule(sphere s,capsule c);
~~~~~~


~~~~~~C linenumbers
API hit*sphere_hit_sphere(sphere a,sphere b);
~~~~~~


~~~~~~C linenumbers
API int sphere_test_aabb(sphere s,aabb a);
~~~~~~


~~~~~~C linenumbers
API int sphere_test_capsule(sphere s,capsule c);
~~~~~~


~~~~~~C linenumbers
API int sphere_test_poly(sphere s,poly p);
~~~~~~


~~~~~~C linenumbers
API int sphere_test_sphere(sphere a,sphere b);
~~~~~~


~~~~~~C linenumbers
API vec3 aabb_closest_point(aabb a,vec3 p);
~~~~~~


~~~~~~C linenumbers
API float aabb_distance2_point(aabb a,vec3 p);
~~~~~~


~~~~~~C linenumbers
API int aabb_contains_point(aabb a,vec3 p);
~~~~~~


~~~~~~C linenumbers
API hit*aabb_hit_aabb(aabb a,aabb b);
~~~~~~


~~~~~~C linenumbers
API hit*aabb_hit_capsule(aabb a,capsule c);
~~~~~~


~~~~~~C linenumbers
API hit*aabb_hit_sphere(aabb a,sphere s);
~~~~~~


~~~~~~C linenumbers
API int aabb_test_aabb(aabb a,aabb b);
~~~~~~


~~~~~~C linenumbers
API int aabb_test_capsule(aabb a,capsule c);
~~~~~~


~~~~~~C linenumbers
API int aabb_test_poly(aabb a,poly p);
~~~~~~


~~~~~~C linenumbers
API int aabb_test_sphere(aabb a,sphere s);
~~~~~~


~~~~~~C linenumbers
API float capsule_distance2_point(capsule c,vec3 p);
~~~~~~


~~~~~~C linenumbers
API vec3 capsule_closest_point(capsule c,vec3 p);
~~~~~~


~~~~~~C linenumbers
API hit*capsule_hit_aabb(capsule c,aabb a);
~~~~~~


~~~~~~C linenumbers
API hit*capsule_hit_capsule(capsule a,capsule b);
~~~~~~


~~~~~~C linenumbers
API hit*capsule_hit_sphere(capsule c,sphere s);
~~~~~~


~~~~~~C linenumbers
API int capsule_test_aabb(capsule c,aabb a);
~~~~~~


~~~~~~C linenumbers
API int capsule_test_capsule(capsule a,capsule b);
~~~~~~


~~~~~~C linenumbers
API int capsule_test_poly(capsule c,poly p);
~~~~~~


~~~~~~C linenumbers
API int capsule_test_sphere(capsule c,sphere s);
~~~~~~


~~~~~~C linenumbers
API int poly_test_sphere(poly p,sphere s);
~~~~~~


~~~~~~C linenumbers
API int poly_test_aabb(poly p,aabb a);
~~~~~~


~~~~~~C linenumbers
API int poly_test_capsule(poly p,capsule c);
~~~~~~


~~~~~~C linenumbers
API int poly_test_poly(poly a,poly b);
~~~~~~


~~~~~~C linenumbers
API int poly_test_sphere_transform(poly p,vec3 pos3,mat33 rot33,sphere s);
~~~~~~


~~~~~~C linenumbers
API int poly_test_aabb_transform(poly p,vec3 apos3,mat33 arot33,aabb a);
~~~~~~


~~~~~~C linenumbers
API int poly_test_capsule_transform(poly p,vec3 pos3,mat33 rot33,capsule c);
~~~~~~


~~~~~~C linenumbers
API int poly_test_poly_transform(poly a,vec3 apos3,mat33 arot33,poly b,vec3 bpos3,mat33 brot33);
~~~~~~


~~~~~~C linenumbers
API int poly_hit_sphere(struct gjk_result*res,poly p,sphere s);
~~~~~~


~~~~~~C linenumbers
API int poly_hit_aabb(struct gjk_result*res,poly p,aabb a);
~~~~~~


~~~~~~C linenumbers
API int poly_hit_capsule(struct gjk_result*res,poly p,capsule c);
~~~~~~


~~~~~~C linenumbers
API int poly_hit_poly(struct gjk_result*res,poly a,poly b);
~~~~~~


~~~~~~C linenumbers
API int poly_hit_sphere_transform(struct gjk_result*res,poly p,vec3 pos3,mat33 rot33,sphere s);
~~~~~~


~~~~~~C linenumbers
API int poly_hit_aabb_transform(struct gjk_result*res,poly p,vec3 pos3,mat33 rot33,aabb a);
~~~~~~


~~~~~~C linenumbers
API int poly_hit_capsule_transform(struct gjk_result*res,poly p,vec3 pos3,mat33 rot33,capsule c);
~~~~~~


~~~~~~C linenumbers
API int poly_hit_poly_transform(struct gjk_result*res,poly a,vec3 at3,mat33 ar33,poly b,vec3 bt3,mat33 br33);
~~~~~~


~~~~~~C linenumbers
API vec4 plane4(vec3 p,vec3 n);
~~~~~~


~~~~~~C linenumbers
API frustum frustum_build(mat44 projview);
~~~~~~


~~~~~~C linenumbers
API int frustum_test_sphere(frustum f,sphere s);
~~~~~~


~~~~~~C linenumbers
API int frustum_test_aabb(frustum f,aabb a);
~~~~~~


~~~~~~C linenumbers
API poly poly_alloc(int cnt);
~~~~~~


~~~~~~C linenumbers
API void poly_free(poly*p);
~~~~~~


~~~~~~C linenumbers
API poly pyramid(vec3 from,vec3 to,float size);
~~~~~~


~~~~~~C linenumbers
API poly diamond(vec3 from,vec3 to,float size);
~~~~~~

## audio


~~~~~~C linenumbers
typedef struct audio_handle*audio_t;
~~~~~~


~~~~~~C linenumbers
API audio_t audio_clip(const char*pathfile);
~~~~~~


~~~~~~C linenumbers
API audio_t audio_stream(const char*pathfile);
~~~~~~


~~~~~~C linenumbers
API int audio_play(audio_t s,int flags);
~~~~~~


~~~~~~C linenumbers
API float audio_volume_clip(float gain);
~~~~~~


~~~~~~C linenumbers
API float audio_volume_stream(float gain);
~~~~~~


~~~~~~C linenumbers
API float audio_volume_master(float gain);
~~~~~~


~~~~~~C linenumbers
enum{AUDIO_1CH=0,AUDIO_2CH=1,AUDIO_8=2,AUDIO_16=0,AUDIO_32=4,AUDIO_FLOAT=8,AUDIO_22KHZ=0,AUDIO_44KHZ=16,};
~~~~~~


~~~~~~C linenumbers
API int audio_queue(const void*samples,int num_samples,int flags);
~~~~~~

## cooker


~~~~~~C linenumbers
enum{COOKER_ASYNC=1,};
~~~~~~


~~~~~~C linenumbers
typedef int(*cooker_callback_t)(char*filename,const char*ext,const char header[16],FILE*in,FILE*out,const char*info,int threadid);
~~~~~~


~~~~~~C linenumbers
API void cooker_config(const char*art_path,const char*tools_path);
~~~~~~


~~~~~~C linenumbers
API bool cooker_process(const char*masks,cooker_callback_t cb,int flags);
~~~~~~


~~~~~~C linenumbers
API int cooker_progress();
~~~~~~

## data


~~~~~~C linenumbers
API bool data_push(const char*source);
~~~~~~


~~~~~~C linenumbers
API int data_count(const char*keypath);
~~~~~~


~~~~~~C linenumbers
API bool data_pop();
~~~~~~


~~~~~~C linenumbers
typedef union data_t{char*s;double f;int64_t i;uintptr_t p;array(union data_t)arr;}data_t;
~~~~~~


~~~~~~C linenumbers
API data_t data_get(bool is_string,const char*keypath);
~~~~~~

## editor


~~~~~~C linenumbers
API void editor();
~~~~~~


~~~~~~C linenumbers
API bool editor_active();
~~~~~~


~~~~~~C linenumbers
API int gizmo(vec3*pos,vec3*rot,vec3*sca);
~~~~~~


~~~~~~C linenumbers
API bool gizmo_active();
~~~~~~

## file


~~~~~~C linenumbers
API const char**file_list(const char*path,const char*masks);
~~~~~~


~~~~~~C linenumbers
API char*file_read(const char*filename);
~~~~~~


~~~~~~C linenumbers
API char*file_load(const char*filename,int*len);
~~~~~~


~~~~~~C linenumbers
API uint64_t file_size(const char*pathfile);
~~~~~~


~~~~~~C linenumbers
API bool file_directory(const char*pathfile);
~~~~~~


~~~~~~C linenumbers
API char*file_path(const char*pathfile);
~~~~~~


~~~~~~C linenumbers
API char*file_name(const char*pathfile);
~~~~~~


~~~~~~C linenumbers
API char*file_ext(const char*pathfile);
~~~~~~


~~~~~~C linenumbers
API char*file_id(const char*pathfile);
~~~~~~


~~~~~~C linenumbers
API char*file_normalize(const char*pathfile);
~~~~~~


~~~~~~C linenumbers
API uint64_t file_stamp(const char*pathfile);
~~~~~~


~~~~~~C linenumbers
API uint64_t file_stamp_human(const char*pathfile);
~~~~~~


~~~~~~C linenumbers
API bool file_copy(const char*src,const char*dst);
~~~~~~


~~~~~~C linenumbers
API FILE*file_temp();
~~~~~~


~~~~~~C linenumbers
API char*file_tempname();
~~~~~~


~~~~~~C linenumbers
API bool vfs_mount(const char*mount_point);
~~~~~~


~~~~~~C linenumbers
API const char**vfs_list(const char*masks);
~~~~~~


~~~~~~C linenumbers
API char*vfs_read(const char*pathfile);
~~~~~~


~~~~~~C linenumbers
API char*vfs_load(const char*pathfile,int*size);
~~~~~~


~~~~~~C linenumbers
API int vfs_size(const char*pathfile);
~~~~~~


~~~~~~C linenumbers
API const char*vfs_resolve(const char*fuzzyname);
~~~~~~


~~~~~~C linenumbers
API const char*vfs_find(const char*pathfile);
~~~~~~


~~~~~~C linenumbers
API FILE*vfs_handle(const char*pathfile);
~~~~~~


~~~~~~C linenumbers
API void*cache_insert(const char*key,void*value,int size);
~~~~~~


~~~~~~C linenumbers
API void*cache_lookup(const char*key,int*size);
~~~~~~

## input


~~~~~~C linenumbers
API int input_use(int controller_id);
~~~~~~


~~~~~~C linenumbers
API float input(int vk);
~~~~~~


~~~~~~C linenumbers
API vec2 input2(int vk);
~~~~~~


~~~~~~C linenumbers
API float input_diff(int vk);
~~~~~~


~~~~~~C linenumbers
API vec2 input_diff2(int vk);
~~~~~~


~~~~~~C linenumbers
API float input_frame(int vk,int frame);
~~~~~~


~~~~~~C linenumbers
API vec2 input_frame2(int vk,int frame);
~~~~~~


~~~~~~C linenumbers
API const char*input_frames(int vk,int frame);
~~~~~~


~~~~~~C linenumbers
API int input_up(int vk);
~~~~~~


~~~~~~C linenumbers
API int input_down(int vk);
~~~~~~


~~~~~~C linenumbers
API int input_held(int vk);
~~~~~~


~~~~~~C linenumbers
API int input_idle(int vk);
~~~~~~


~~~~~~C linenumbers
API int input_click(int vk,int ms);
~~~~~~


~~~~~~C linenumbers
API int input_click2(int vk,int ms);
~~~~~~


~~~~~~C linenumbers
API int input_repeat(int vk,int ms);
~~~~~~


~~~~~~C linenumbers
API int input_chord2(int vk1,int vk2);
~~~~~~


~~~~~~C linenumbers
API int input_chord3(int vk1,int vk2,int vk3);
~~~~~~


~~~~~~C linenumbers
API int input_chord4(int vk1,int vk2,int vk3,int vk4);
~~~~~~


~~~~~~C linenumbers
API float input_filter_positive(float v);
~~~~~~


~~~~~~C linenumbers
API vec2 input_filter_positive2(vec2 v);
~~~~~~


~~~~~~C linenumbers
API vec2 input_filter_deadzone(vec2 v,float deadzone);
~~~~~~


~~~~~~C linenumbers
API vec2 input_filter_deadzone_4way(vec2 v,float deadzone);
~~~~~~


~~~~~~C linenumbers
API void input_demo();
~~~~~~


~~~~~~C linenumbers
API void input_send(int vk);
~~~~~~


~~~~~~C linenumbers
API void*input_save_state(int id,int*size);
~~~~~~


~~~~~~C linenumbers
API bool input_load_state(int id,void*ptr,int size);
~~~~~~


~~~~~~C linenumbers
enum{KEY_ESC,KEY_TICK,KEY_1,KEY_2,KEY_3,KEY_4,KEY_5,KEY_6,KEY_7,KEY_8,KEY_9,KEY_0,KEY_BS,KEY_TAB,KEY_Q,KEY_W,KEY_E,KEY_R,KEY_T,KEY_Y,KEY_U,KEY_I,KEY_O,KEY_P,KEY_CAPS,KEY_A,KEY_S,KEY_D,KEY_F,KEY_G,KEY_H,KEY_J,KEY_K,KEY_L,KEY_ENTER,KEY_LSHIFT,KEY_Z,KEY_X,KEY_C,KEY_V,KEY_B,KEY_N,KEY_M,KEY_RSHIFT,KEY_UP,KEY_LCTRL,KEY_LALT,KEY_SPACE,KEY_RALT,KEY_RCTRL,KEY_LEFT,KEY_DOWN,KEY_RIGHT,KEY_INS,KEY_HOME,KEY_PGUP,KEY_DEL,KEY_END,KEY_PGDN,KEY_LMETA,KEY_RMETA,KEY_MENU,KEY_PRINT,KEY_PAUSE,KEY_SCROLL,KEY_NUMLOCK,KEY_MINUS,KEY_EQUAL,KEY_LSQUARE,KEY_RSQUARE,KEY_SEMICOLON,KEY_QUOTE,KEY_HASH,KEY_BAR,KEY_COMMA,KEY_DOT,KEY_SLASH,KEY_F1,KEY_F2,KEY_F3,KEY_F4,KEY_F5,KEY_F6,KEY_F7,KEY_F8,KEY_F9,KEY_F10,KEY_F11,KEY_F12,KEY_PAD1,KEY_PAD2,KEY_PAD3,KEY_PAD4,KEY_PAD5,KEY_PAD6,KEY_PAD7,KEY_PAD8,KEY_PAD9,KEY_PAD0,KEY_PADADD,KEY_PADSUB,KEY_PADMUL,KEY_PADDIV,KEY_PADDOT,KEY_PADENTER,MOUSE_L,MOUSE_M,MOUSE_R,GAMEPAD_CONNECTED,GAMEPAD_A,GAMEPAD_B,GAMEPAD_X,GAMEPAD_Y,GAMEPAD_UP,GAMEPAD_DOWN,GAMEPAD_LEFT,GAMEPAD_RIGHT,GAMEPAD_MENU,GAMEPAD_START,GAMEPAD_LB,GAMEPAD_RB,GAMEPAD_LTHUMB,GAMEPAD_RTHUMB,WINDOW_BLUR,WINDOW_FOCUS,WINDOW_CLOSE,WINDOW_MINIMIZE,WINDOW_MAXIMIZE,WINDOW_FULLSCREEN,WINDOW_WINDOWED,GAMEPAD_LPAD,GAMEPAD_LPADX=GAMEPAD_LPAD,GAMEPAD_LPADY,GAMEPAD_RPAD,GAMEPAD_RPADX=GAMEPAD_RPAD,GAMEPAD_RPADY,GAMEPAD_LT,GAMEPAD_RT,GAMEPAD_BATTERY,MOUSE,MOUSE_X=MOUSE,MOUSE_Y,MOUSE_W,TOUCH_X1,TOUCH_Y1,TOUCH_X2,TOUCH_Y2,WINDOW_RESIZE,WINDOW_RESIZEX=WINDOW_RESIZE,WINDOW_RESIZEY,WINDOW_ORIENTATION,WINDOW_BATTERY,GAMEPAD_GUID,GAMEPAD_NAME,};
~~~~~~

## network


~~~~~~C linenumbers
API int download(FILE*out,const char*url);
~~~~~~


~~~~~~C linenumbers
API int portname(const char*service_name,unsigned retries);
~~~~~~


~~~~~~C linenumbers
API int udp_bind(const char*address,const char*port);
~~~~~~


~~~~~~C linenumbers
API int udp_open(const char*address,const char*port);
~~~~~~


~~~~~~C linenumbers
API int udp_send(int,const void*buf,int len);
~~~~~~


~~~~~~C linenumbers
API int udp_sendto(int,const char*ip,const char*port,const void*buf,int len);
~~~~~~


~~~~~~C linenumbers
API int udp_recv(int,void*buf,int len);
~~~~~~


~~~~~~C linenumbers
API int udp_peek(int);
~~~~~~


~~~~~~C linenumbers
API int tcp_open(const char*address,const char*port);
~~~~~~


~~~~~~C linenumbers
API int tcp_bind(const char*interface_,const char*port,int queue);
~~~~~~


~~~~~~C linenumbers
API int tcp_peek(int,int(*callback)(int));
~~~~~~


~~~~~~C linenumbers
API int tcp_send(int,const void*buf,int len);
~~~~~~


~~~~~~C linenumbers
API int tcp_recv(int,void*buf,int len);
~~~~~~


~~~~~~C linenumbers
API char*tcp_host(int);
~~~~~~


~~~~~~C linenumbers
API char*tcp_port(int);
~~~~~~


~~~~~~C linenumbers
API int tcp_close(int);
~~~~~~


~~~~~~C linenumbers
API int tcp_debug(int);
~~~~~~

## render


~~~~~~C linenumbers
typedef unsigned handle;
~~~~~~


~~~~~~C linenumbers
API uint32_t rgba(uint8_t r,uint8_t g,uint8_t b,uint8_t a);
~~~~~~


~~~~~~C linenumbers
API uint32_t bgra(uint8_t r,uint8_t g,uint8_t b,uint8_t a);
~~~~~~


~~~~~~C linenumbers
API float alpha(uint32_t rgba);
~~~~~~


~~~~~~C linenumbers
enum{IMAGE_R=0x01000,IMAGE_RG=0x02000,IMAGE_RGB=0x04000,IMAGE_RGBA=0x08000,IMAGE_FLIP=0x10000,};
~~~~~~


~~~~~~C linenumbers
typedef struct image_t{union{unsigned x,w;};union{unsigned y,h;};union{unsigned n,comps;};union{void*pixels;uint8_t*pixels8;uint16_t*pixels16;uint32_t*pixels32;float*pixelsf;};}image_t;
~~~~~~


~~~~~~C linenumbers
API image_t image(const char*pathfile,int flags);
~~~~~~


~~~~~~C linenumbers
API image_t image_from_mem(const char*ptr,int len,int flags);
~~~~~~


~~~~~~C linenumbers
API void image_destroy(image_t*img);
~~~~~~


~~~~~~C linenumbers
enum{TEXTURE_BC1=8,TEXTURE_BC2=16,TEXTURE_BC3=32,TEXTURE_NEAREST=0,TEXTURE_LINEAR=64,TEXTURE_MIPMAPS=128,TEXTURE_EDGE=0,TEXTURE_BORDER=0x100,TEXTURE_REPEAT=0x200,TEXTURE_BYTE=0,TEXTURE_FLOAT=0x400,TEXTURE_COLOR=0,TEXTURE_DEPTH=0x800,TEXTURE_R=IMAGE_R,TEXTURE_RG=IMAGE_RG,TEXTURE_RGB=IMAGE_RGB,TEXTURE_RGBA=IMAGE_RGBA,TEXTURE_FLIP=IMAGE_FLIP,TEXTURE_SRGB=1<<24,TEXTURE_BGR=1<<25,TEXTURE_ARRAY=1<<26,};
~~~~~~


~~~~~~C linenumbers
typedef struct{union{unsigned x,w;};union{unsigned y,h;};union{unsigned n,bpp;};handle id;unsigned flags;}texture_t;
~~~~~~


~~~~~~C linenumbers
API texture_t texture(const char*filename,int flags);
~~~~~~


~~~~~~C linenumbers
API texture_t texture_from_mem(const char*ptr,int len,int flags);
~~~~~~


~~~~~~C linenumbers
API texture_t texture_create(unsigned w,unsigned h,unsigned n,void*pixels,int flags);
~~~~~~


~~~~~~C linenumbers
API texture_t texture_checker();
~~~~~~


~~~~~~C linenumbers
API void texture_destroy(texture_t*t);
~~~~~~


~~~~~~C linenumbers
API unsigned texture_update(texture_t*t,unsigned w,unsigned h,unsigned n,void*pixels,int flags);
~~~~~~


~~~~~~C linenumbers
API void fullscreen_rgb_quad(texture_t texture_rgb,float gamma);
~~~~~~


~~~~~~C linenumbers
API void fullscreen_ycbcr_quad(texture_t texture_YCbCr[3],float gamma);
~~~~~~


~~~~~~C linenumbers
API void tile(texture_t texture,vec3 position,uint32_t color,float rotation);
~~~~~~


~~~~~~C linenumbers
API void sprite(texture_t texture,float position[3],float rotation,float offset[2],float scale[2],int is_additive,uint32_t rgba,float spritesheet[3]);
~~~~~~


~~~~~~C linenumbers
API void sprite_update();
~~~~~~


~~~~~~C linenumbers
typedef struct cubemap_t{unsigned id;vec3 sh[9];}cubemap_t;
~~~~~~


~~~~~~C linenumbers
API cubemap_t cubemap(const image_t image,int flags);
~~~~~~


~~~~~~C linenumbers
API cubemap_t cubemap6(const image_t images[6],int flags);
~~~~~~


~~~~~~C linenumbers
API void cubemap_destroy(cubemap_t*c);
~~~~~~


~~~~~~C linenumbers
API cubemap_t*cubemap_get_active();
~~~~~~


~~~~~~C linenumbers
API unsigned fbo(unsigned texture_color,unsigned texture_depth,int wr_flags);
~~~~~~


~~~~~~C linenumbers
API void fbo_bind(unsigned id);
~~~~~~


~~~~~~C linenumbers
API void fbo_unbind();
~~~~~~


~~~~~~C linenumbers
API void fbo_destroy(unsigned id);
~~~~~~


~~~~~~C linenumbers
typedef struct shadowmap_t{mat44 shadowmatrix;mat44 mvp;mat44 mv;mat44 proj;vec4 light_position;int saved_fb;int saved_viewport[4];handle fbo,texture;int texture_width;}shadowmap_t;
~~~~~~


~~~~~~C linenumbers
API shadowmap_t shadowmap(int texture_width);
~~~~~~


~~~~~~C linenumbers
API void shadowmap_destroy(shadowmap_t*s);
~~~~~~


~~~~~~C linenumbers
API void shadowmap_set_shadowmatrix(shadowmap_t*s,vec3 aLightPos,vec3 aLightAt,vec3 aLightUp,const mat44 projection);
~~~~~~


~~~~~~C linenumbers
API void shadowmap_begin(shadowmap_t*s);
~~~~~~


~~~~~~C linenumbers
API void shadowmap_end(shadowmap_t*s);
~~~~~~


~~~~~~C linenumbers
API void shadowmatrix_proj(mat44 shm_proj,float aLightFov,float znear,float zfar);
~~~~~~


~~~~~~C linenumbers
API void shadowmatrix_ortho(mat44 shm_proj,float left,float right,float bottom,float top,float znear,float zfar);
~~~~~~


~~~~~~C linenumbers
API unsigned shader(const char*vs,const char*fs,const char*attribs,const char*fragcolor);
~~~~~~


~~~~~~C linenumbers
API unsigned shader_bind(unsigned program);
~~~~~~


~~~~~~C linenumbers
API void shader_int(const char*uniform,int i);
~~~~~~


~~~~~~C linenumbers
API void shader_float(const char*uniform,float f);
~~~~~~


~~~~~~C linenumbers
API void shader_vec2(const char*uniform,vec2 v);
~~~~~~


~~~~~~C linenumbers
API void shader_vec3(const char*uniform,vec3 v);
~~~~~~


~~~~~~C linenumbers
API void shader_vec4(const char*uniform,vec4 v);
~~~~~~


~~~~~~C linenumbers
API void shader_mat44(const char*uniform,mat44 m);
~~~~~~


~~~~~~C linenumbers
API void shader_texture(const char*sampler,unsigned texture,unsigned unit);
~~~~~~


~~~~~~C linenumbers
API unsigned shader_get_active();
~~~~~~


~~~~~~C linenumbers
API void shader_destroy(unsigned shader);
~~~~~~


~~~~~~C linenumbers
enum MESH_FLAGS{MESH_STATIC=0,MESH_STREAM=1,MESH_TRIANGLE_STRIP=2,};
~~~~~~


~~~~~~C linenumbers
typedef struct mesh_t{handle vao,vbo,ibo;unsigned vertex_count;unsigned index_count;unsigned flags;}mesh_t;
~~~~~~


~~~~~~C linenumbers
API mesh_t mesh_create(const char*format,int vertex_stride,int vertex_count,const void*interleaved_vertex_data,int index_count,const void*index_data,int flags);
~~~~~~


~~~~~~C linenumbers
API void mesh_upgrade(mesh_t*m,const char*format,int vertex_stride,int vertex_count,const void*interleaved_vertex_data,int index_count,const void*index_data,int flags);
~~~~~~


~~~~~~C linenumbers
API void mesh_push_state(mesh_t*m,unsigned program,unsigned texture_id,float model[16],float view[16],float proj[16],unsigned billboard);
~~~~~~


~~~~~~C linenumbers
API void mesh_pop_state(mesh_t*m);
~~~~~~


~~~~~~C linenumbers
API void mesh_render(mesh_t*m);
~~~~~~


~~~~~~C linenumbers
API void mesh_destroy(mesh_t*m);
~~~~~~


~~~~~~C linenumbers
API aabb mesh_bounds(mesh_t*m);
~~~~~~


~~~~~~C linenumbers
enum{MODEL_NO_ANIMATIONS=1,MODEL_NO_MESHES=2,MODEL_NO_TEXTURES=4,};
~~~~~~


~~~~~~C linenumbers
typedef struct model_t{struct iqm_t*iqm;unsigned num_meshes;unsigned num_triangles;unsigned num_joints;unsigned num_anims;unsigned num_frames;handle program;float curframe;mat44 pivot;}model_t;
~~~~~~


~~~~~~C linenumbers
API model_t model(const char*filename,int flags);
~~~~~~


~~~~~~C linenumbers
API model_t model_from_mem(const void*mem,int sz,int flags);
~~~~~~


~~~~~~C linenumbers
API float model_animate(model_t,float curframe);
~~~~~~


~~~~~~C linenumbers
API float model_animate_clip(model_t,float curframe,int minframe,int maxframe,bool loop);
~~~~~~


~~~~~~C linenumbers
API aabb model_aabb(model_t,mat44 transform);
~~~~~~


~~~~~~C linenumbers
API void model_render2(model_t,mat44 proj,mat44 view,mat44 model,int shader);
~~~~~~


~~~~~~C linenumbers
API void model_render(model_t,mat44 proj,mat44 view,mat44 model);
~~~~~~


~~~~~~C linenumbers
API void model_destroy(model_t);
~~~~~~


~~~~~~C linenumbers
typedef struct skybox_t{handle program;mesh_t geometry;cubemap_t cubemap;int flags;}skybox_t;
~~~~~~


~~~~~~C linenumbers
API skybox_t skybox(const char*panorama_or_cubemap_folder,int flags);
~~~~~~


~~~~~~C linenumbers
API int skybox_push_state(skybox_t*sky,mat44 proj,mat44 view);
~~~~~~


~~~~~~C linenumbers
API int skybox_pop_state(skybox_t*sky);
~~~~~~


~~~~~~C linenumbers
API void skybox_destroy(skybox_t*sky);
~~~~~~


~~~~~~C linenumbers
API void viewport_color(vec3 color);
~~~~~~


~~~~~~C linenumbers
API void viewport_clear(bool color,bool depth);
~~~~~~


~~~~~~C linenumbers
API void viewport_clip(vec2 from,vec2 to);
~~~~~~


~~~~~~C linenumbers
API void fx_load(const char*file);
~~~~~~


~~~~~~C linenumbers
API void fx_begin();
~~~~~~


~~~~~~C linenumbers
API void fx_end();
~~~~~~


~~~~~~C linenumbers
API void fx_enable(int pass,int enabled);
~~~~~~


~~~~~~C linenumbers
API int fx_enabled(int pass);
~~~~~~


~~~~~~C linenumbers
API void fx_enable_all(int enabled);
~~~~~~


~~~~~~C linenumbers
API char*fx_name(int pass);
~~~~~~


~~~~~~C linenumbers
API void*screenshot(unsigned components);
~~~~~~

## renderdd


~~~~~~C linenumbers
API void ddraw_color(unsigned rgb);
~~~~~~


~~~~~~C linenumbers
API void ddraw_ontop(int enabled);
~~~~~~


~~~~~~C linenumbers
API void ddraw_aabb(vec3 minbb,vec3 maxbb);
~~~~~~


~~~~~~C linenumbers
API void ddraw_aabb_corners(vec3 minbb,vec3 maxbb);
~~~~~~


~~~~~~C linenumbers
API void ddraw_arrow(vec3 begin,vec3 end);
~~~~~~


~~~~~~C linenumbers
API void ddraw_axis(float units);
~~~~~~


~~~~~~C linenumbers
API void ddraw_boid(vec3 pos,vec3 dir);
~~~~~~


~~~~~~C linenumbers
API void ddraw_bone(vec3 center,vec3 end);
~~~~~~


~~~~~~C linenumbers
API void ddraw_bounds(const vec3 points[8]);
~~~~~~


~~~~~~C linenumbers
API void ddraw_box(vec3 c,vec3 extents);
~~~~~~


~~~~~~C linenumbers
API void ddraw_capsule(vec3 from,vec3 to,float radius);
~~~~~~


~~~~~~C linenumbers
API void ddraw_circle(vec3 pos,vec3 n,float radius);
~~~~~~


~~~~~~C linenumbers
API void ddraw_cone(vec3 center,vec3 top,float radius);
~~~~~~


~~~~~~C linenumbers
API void ddraw_cube(vec3 center,float radius);
~~~~~~


~~~~~~C linenumbers
API void ddraw_diamond(vec3 from,vec3 to,float size);
~~~~~~


~~~~~~C linenumbers
API void ddraw_frustum(float projview[16]);
~~~~~~


~~~~~~C linenumbers
API void ddraw_ground(float scale);
~~~~~~


~~~~~~C linenumbers
API void ddraw_grid(float scale);
~~~~~~


~~~~~~C linenumbers
API void ddraw_hexagon(vec3 pos,float radius);
~~~~~~


~~~~~~C linenumbers
API void ddraw_line(vec3 from,vec3 to);
~~~~~~


~~~~~~C linenumbers
API void ddraw_line_dashed(vec3 from,vec3 to);
~~~~~~


~~~~~~C linenumbers
API void ddraw_line_thin(vec3 from,vec3 to);
~~~~~~


~~~~~~C linenumbers
API void ddraw_normal(vec3 pos,vec3 n);
~~~~~~


~~~~~~C linenumbers
API void ddraw_pentagon(vec3 pos,float radius);
~~~~~~


~~~~~~C linenumbers
API void ddraw_plane(vec3 p,vec3 n,float scale);
~~~~~~


~~~~~~C linenumbers
API void ddraw_point(vec3 from);
~~~~~~


~~~~~~C linenumbers
API void ddraw_position(vec3 pos,float radius);
~~~~~~


~~~~~~C linenumbers
API void ddraw_position_dir(vec3 pos,vec3 dir,float radius);
~~~~~~


~~~~~~C linenumbers
API void ddraw_pyramid(vec3 center,float height,int segments);
~~~~~~


~~~~~~C linenumbers
API void ddraw_sphere(vec3 pos,float radius);
~~~~~~


~~~~~~C linenumbers
API void ddraw_square(vec3 pos,float radius);
~~~~~~


~~~~~~C linenumbers
API void ddraw_text(vec3 pos,float scale,const char*text);
~~~~~~


~~~~~~C linenumbers
API void ddraw_text2d(vec2 pos,float scale,const char*text);
~~~~~~


~~~~~~C linenumbers
API void ddraw_triangle(vec3 p1,vec3 p2,vec3 p3);
~~~~~~


~~~~~~C linenumbers
API void ddraw_demo();
~~~~~~


~~~~~~C linenumbers
API void ddraw_flush();
~~~~~~

## scene


~~~~~~C linenumbers
typedef struct{mat44 view,proj;vec3 position,up,look;float yaw,pitch,speed;vec3 last_look,last_move;}camera_t;
~~~~~~


~~~~~~C linenumbers
API camera_t camera();
~~~~~~


~~~~~~C linenumbers
API void camera_move(camera_t*cam,float x,float y,float z);
~~~~~~


~~~~~~C linenumbers
API void camera_fps(camera_t*cam,float yaw,float pitch);
~~~~~~


~~~~~~C linenumbers
API void camera_lookat(camera_t*cam,vec3 target);
~~~~~~


~~~~~~C linenumbers
API camera_t*camera_get_active();
~~~~~~


~~~~~~C linenumbers
typedef struct{uint64_t renderbucket;mat44 transform;quat rot;vec3 sca,pos,euler,pivot;handle texture_id;model_t model;aabb bounds;unsigned billboard;}object_t;
~~~~~~


~~~~~~C linenumbers
API object_t object();
~~~~~~


~~~~~~C linenumbers
API void object_rotate(object_t*obj,vec3 euler);
~~~~~~


~~~~~~C linenumbers
API void object_pivot(object_t*obj,vec3 euler);
~~~~~~


~~~~~~C linenumbers
API void object_teleport(object_t*obj,vec3 pos);
~~~~~~


~~~~~~C linenumbers
API void object_move(object_t*obj,vec3 inc);
~~~~~~


~~~~~~C linenumbers
API vec3 object_position(object_t*obj);
~~~~~~


~~~~~~C linenumbers
API void object_scale(object_t*obj,vec3 sca);
~~~~~~


~~~~~~C linenumbers
API void object_model(object_t*obj,model_t model);
~~~~~~


~~~~~~C linenumbers
API void object_diffuse(object_t*obj,texture_t tex);
~~~~~~


~~~~~~C linenumbers
API void object_billboard(object_t*obj,unsigned mode);
~~~~~~


~~~~~~C linenumbers
enum{SCENE_WIREFRAME=1,SCENE_CULLFACE=2,SCENE_BACKGROUND=4,SCENE_FOREGROUND=8,};
~~~~~~


~~~~~~C linenumbers
typedef struct{handle program;array(object_t)objs;skybox_t skybox;int u_coefficients_sh;}scene_t;
~~~~~~


~~~~~~C linenumbers
API scene_t*scene_push();
~~~~~~


~~~~~~C linenumbers
API void scene_pop();
~~~~~~


~~~~~~C linenumbers
API scene_t*scene_get_active();
~~~~~~


~~~~~~C linenumbers
API int scene_merge(const char*source);
~~~~~~


~~~~~~C linenumbers
API void scene_render(int flags);
~~~~~~


~~~~~~C linenumbers
API object_t*scene_spawn();
~~~~~~


~~~~~~C linenumbers
API unsigned scene_count();
~~~~~~


~~~~~~C linenumbers
API object_t*scene_index(unsigned index);
~~~~~~

## script


~~~~~~C linenumbers
API void script_init();
~~~~~~


~~~~~~C linenumbers
API void script_run(const char*script);
~~~~~~


~~~~~~C linenumbers
API void script_runfile(const char*pathfile);
~~~~~~


~~~~~~C linenumbers
API void script_bind_class(const char*objname,int num_methods,const char**c_names,void**c_functions);
~~~~~~


~~~~~~C linenumbers
API void script_bind_function(const char*c_name,void*c_function);
~~~~~~


~~~~~~C linenumbers
API void script_call(const char*lua_function);
~~~~~~

## system


~~~~~~C linenumbers
API int argc();
~~~~~~


~~~~~~C linenumbers
API char*argv(int);
~~~~~~


~~~~~~C linenumbers
API int flag(const char*commalist);
~~~~~~


~~~~~~C linenumbers
API const char*option(const char*commalist,const char*defaults);
~~~~~~


~~~~~~C linenumbers
API int optioni(const char*commalist,int defaults);
~~~~~~


~~~~~~C linenumbers
API float optionf(const char*commalist,float defaults);
~~~~~~


~~~~~~C linenumbers
API char*os_exec_output();
~~~~~~


~~~~~~C linenumbers
API int os_exec(const char*command);
~~~~~~


~~~~~~C linenumbers
API void tty_color(unsigned color);
~~~~~~


~~~~~~C linenumbers
API void tty_reset();
~~~~~~


~~~~~~C linenumbers
API int cpu_cores(void);
~~~~~~


~~~~~~C linenumbers
API const char*app_name();
~~~~~~


~~~~~~C linenumbers
API const char*app_path();
~~~~~~


~~~~~~C linenumbers
API const char*app_cache();
~~~~~~


~~~~~~C linenumbers
API const char*app_temp();
~~~~~~


~~~~~~C linenumbers
API void app_reload();
~~~~~~


~~~~~~C linenumbers
API double time_ss();
~~~~~~


~~~~~~C linenumbers
API double time_ms();
~~~~~~


~~~~~~C linenumbers
API uint64_t time_us();
~~~~~~


~~~~~~C linenumbers
API uint64_t date_human();
~~~~~~


~~~~~~C linenumbers
API double sleep_ss(double ss);
~~~~~~


~~~~~~C linenumbers
API double sleep_ms(double ms);
~~~~~~


~~~~~~C linenumbers
API uint64_t sleep_us(uint64_t us);
~~~~~~


~~~~~~C linenumbers
API char*callstack(int traces);
~~~~~~


~~~~~~C linenumbers
API int callstackf(FILE*fp,int traces);
~~~~~~


~~~~~~C linenumbers
API void die(const char*message);
~~~~~~


~~~~~~C linenumbers
API void alert(const char*message);
~~~~~~


~~~~~~C linenumbers
API void hexdump(const void*ptr,unsigned len);
~~~~~~


~~~~~~C linenumbers
API void hexdumpf(FILE*fp,const void*ptr,unsigned len,int width);
~~~~~~


~~~~~~C linenumbers
API void breakpoint(const char*reason);
~~~~~~


~~~~~~C linenumbers
API bool has_debugger();
~~~~~~


~~~~~~C linenumbers
API uint16_t lil16(uint16_t n);
~~~~~~


~~~~~~C linenumbers
API uint32_t lil32(uint32_t n);
~~~~~~


~~~~~~C linenumbers
API float lil32f(float n);
~~~~~~


~~~~~~C linenumbers
API uint64_t lil64(uint64_t n);
~~~~~~


~~~~~~C linenumbers
API double lil64f(double n);
~~~~~~


~~~~~~C linenumbers
API uint16_t big16(uint16_t n);
~~~~~~


~~~~~~C linenumbers
API uint32_t big32(uint32_t n);
~~~~~~


~~~~~~C linenumbers
API float big32f(float n);
~~~~~~


~~~~~~C linenumbers
API uint64_t big64(uint64_t n);
~~~~~~


~~~~~~C linenumbers
API double big64f(double n);
~~~~~~


~~~~~~C linenumbers
API uint16_t*lil16p(void*n,int sz);
~~~~~~


~~~~~~C linenumbers
API uint32_t*lil32p(void*n,int sz);
~~~~~~


~~~~~~C linenumbers
API float*lil32pf(void*n,int sz);
~~~~~~


~~~~~~C linenumbers
API uint64_t*lil64p(void*n,int sz);
~~~~~~


~~~~~~C linenumbers
API double*lil64pf(void*n,int sz);
~~~~~~


~~~~~~C linenumbers
API uint16_t*big16p(void*n,int sz);
~~~~~~


~~~~~~C linenumbers
API uint32_t*big32p(void*n,int sz);
~~~~~~


~~~~~~C linenumbers
API float*big32pf(void*n,int sz);
~~~~~~


~~~~~~C linenumbers
API uint64_t*big64p(void*n,int sz);
~~~~~~


~~~~~~C linenumbers
API double*big64pf(void*n,int sz);
~~~~~~


~~~~~~C linenumbers
API int(PRINTF)(const char*text,const char*stack,const char*file,int line,const char*function);
~~~~~~


~~~~~~C linenumbers
API int(PANIC)(const char*error,const char*file,int line);
~~~~~~

## ui


~~~~~~C linenumbers
API int ui_begin(const char*title,int flags);
~~~~~~


~~~~~~C linenumbers
API int ui_int(const char*label,int*value);
~~~~~~


~~~~~~C linenumbers
API int ui_bool(const char*label,bool*value);
~~~~~~


~~~~~~C linenumbers
API int ui_short(const char*label,short*value);
~~~~~~


~~~~~~C linenumbers
API int ui_float(const char*label,float*value);
~~~~~~


~~~~~~C linenumbers
API int ui_float2(const char*label,float value[2]);
~~~~~~


~~~~~~C linenumbers
API int ui_float3(const char*label,float value[3]);
~~~~~~


~~~~~~C linenumbers
API int ui_string(const char*label,char*buffer,int buflen);
~~~~~~


~~~~~~C linenumbers
API int ui_color3(const char*label,float*color3);
~~~~~~


~~~~~~C linenumbers
API int ui_color4(const char*label,float*color4);
~~~~~~


~~~~~~C linenumbers
API int ui_button(const char*label);
~~~~~~


~~~~~~C linenumbers
API int ui_toggle(const char*label,bool*value);
~~~~~~


~~~~~~C linenumbers
API int ui_dialog(const char*title,const char*text,int choices,bool*show);
~~~~~~


~~~~~~C linenumbers
API int ui_list(const char*label,const char**items,int num_items,int*selector);
~~~~~~


~~~~~~C linenumbers
API int ui_separator();
~~~~~~


~~~~~~C linenumbers
API int ui_label(const char*label);
~~~~~~


~~~~~~C linenumbers
API int ui_label2(const char*label,const char*caption);
~~~~~~


~~~~~~C linenumbers
API int ui_slider(const char*label,float*value);
~~~~~~


~~~~~~C linenumbers
API int ui_slider2(const char*label,float*value,const char*caption);
~~~~~~


~~~~~~C linenumbers
API int ui_const_bool(const char*label,const double value);
~~~~~~


~~~~~~C linenumbers
API int ui_const_float(const char*label,const double value);
~~~~~~


~~~~~~C linenumbers
API int ui_const_string(const char*label,const char*value);
~~~~~~


~~~~~~C linenumbers
API void ui_end();
~~~~~~


~~~~~~C linenumbers
API int ui_menu(const char*items);
~~~~~~


~~~~~~C linenumbers
API int ui_item();
~~~~~~


~~~~~~C linenumbers
API int ui_hover();
~~~~~~


~~~~~~C linenumbers
API int ui_active();
~~~~~~


~~~~~~C linenumbers
API void ui_demo();
~~~~~~

## video


~~~~~~C linenumbers
typedef struct video_t video_t;
~~~~~~


~~~~~~C linenumbers
API video_t*video(const char*filename,int flags);
~~~~~~


~~~~~~C linenumbers
API texture_t*video_decode(video_t*v);
~~~~~~


~~~~~~C linenumbers
API int video_has_finished(video_t*v);
~~~~~~


~~~~~~C linenumbers
API double video_duration(video_t*v);
~~~~~~


~~~~~~C linenumbers
API int video_seek(video_t*v,double seek_to);
~~~~~~


~~~~~~C linenumbers
API double video_position(video_t*v);
~~~~~~


~~~~~~C linenumbers
API void video_pause(video_t*v,bool paused);
~~~~~~


~~~~~~C linenumbers
API bool video_is_paused(video_t*v);
~~~~~~


~~~~~~C linenumbers
API void video_destroy(video_t*v);
~~~~~~

## window


~~~~~~C linenumbers
enum{WINDOW_NO_MOUSE=0x01,WINDOW_MSAA2=0x02,WINDOW_MSAA4=0x04,WINDOW_MSAA8=0x08,WINDOW_SQUARE=0x20,WINDOW_PORTRAIT=0x40,WINDOW_LANDSCAPE=0x80,};
~~~~~~


~~~~~~C linenumbers
API void window_create(float zoom,int flags);
~~~~~~


~~~~~~C linenumbers
API void window_title(const char*title);
~~~~~~


~~~~~~C linenumbers
API void window_icon(const char*file_icon);
~~~~~~


~~~~~~C linenumbers
API void window_flush();
~~~~~~


~~~~~~C linenumbers
API int window_swap();
~~~~~~


~~~~~~C linenumbers
API void*window_handle();
~~~~~~


~~~~~~C linenumbers
API int window_width();
~~~~~~


~~~~~~C linenumbers
API int window_height();
~~~~~~


~~~~~~C linenumbers
API double window_aspect();
~~~~~~


~~~~~~C linenumbers
API double window_time();
~~~~~~


~~~~~~C linenumbers
API double window_delta();
~~~~~~


~~~~~~C linenumbers
API double window_fps();
~~~~~~


~~~~~~C linenumbers
API bool window_hook(void(*func)(),void*userdata);
~~~~~~


~~~~~~C linenumbers
API void window_unhook(void(*func)());
~~~~~~


~~~~~~C linenumbers
API void window_focus();
~~~~~~


~~~~~~C linenumbers
API int window_has_focus();
~~~~~~


~~~~~~C linenumbers
API void window_fullscreen(int enabled);
~~~~~~


~~~~~~C linenumbers
API int window_has_fullscreen();
~~~~~~


~~~~~~C linenumbers
API void window_cursor(int visible);
~~~~~~


~~~~~~C linenumbers
API int window_has_cursor();
~~~~~~


~~~~~~C linenumbers
API void window_pause();
~~~~~~


~~~~~~C linenumbers
API int window_has_pause();
~~~~~~


~~~~~~C linenumbers
API void window_visible(int visible);
~~~~~~


~~~~~~C linenumbers
API int window_has_visible();
~~~~~~


~~~~~~C linenumbers
API void window_videorec(const char*filename_mpg);
~~~~~~


~~~~~~C linenumbers
API int window_has_videorec();
~~~~~~


~~~~~~C linenumbers
API void window_screenshot(const char*filename_png);
~~~~~~

## ds


~~~~~~C linenumbers
static inline int less_int(int a,int b){return a-b;}
~~~~~~


~~~~~~C linenumbers
static inline int less_u64(uint64_t a,uint64_t b){return a>b?+1:-!!(a-b);}
~~~~~~


~~~~~~C linenumbers
static inline int less_ptr(void*a,void*b){return(uintptr_t)a>(uintptr_t)b?+1:-!!((uintptr_t)a-(uintptr_t)b);}
~~~~~~


~~~~~~C linenumbers
static inline int less_str(char*a,char*b){return strcmp((const char*)a,(const char*)b);}
~~~~~~


~~~~~~C linenumbers
static inline uint32_t unhash_32(uint32_t x){x=((x>>16)^x)*0x119de1f3;x=((x>>16)^x)*0x119de1f3;x=(x>>16)^x;return x;}
~~~~~~


~~~~~~C linenumbers
static inline uint32_t hash_32(uint32_t x){x=((x>>16)^x)*0x45d9f3b;x=((x>>16)^x)*0x45d9f3b;x=(x>>16)^x;return x;}
~~~~~~


~~~~~~C linenumbers
static inline uint64_t hash_64(uint64_t x){x=(x ^(x>>30))*UINT64_C(0xbf58476d1ce4e5b9);x=(x ^(x>>27))*UINT64_C(0x94d049bb133111eb);x=x ^(x>>31);return x;}
~~~~~~


~~~~~~C linenumbers
static inline uint64_t hash_flt(double x){union{double d;uint64_t i;}c;return c.d=x,hash_64(c.i);}
~~~~~~


~~~~~~C linenumbers
static inline uint64_t hash_str(const char*str){uint64_t hash=14695981039346656037ULL;while(*str)hash=((unsigned char)*str++^hash)*0x100000001b3ULL;return hash;}
~~~~~~


~~~~~~C linenumbers
static inline uint64_t hash_int(int key){return hash_32((uint32_t)key);}
~~~~~~


~~~~~~C linenumbers
static inline uint64_t hash_ptr(const void*ptr){uint64_t key=(uint64_t)(uintptr_t)ptr;return hash_64(key>>3);}
~~~~~~


~~~~~~C linenumbers
static inline void*vrealloc(void*p,size_t sz){if(!sz){if(p){size_t*ret=(size_t*)p-2;ret[0]=0;ret[1]=0;REALLOC(ret,0);}return 0;}else{size_t*ret=(size_t*)p-2;if(!p){ret=(size_t*)REALLOC(0,sizeof(size_t)*2+sz);ret[0]=sz;ret[1]=0;}else{size_t osz=ret[0];size_t ocp=ret[1];if(sz<=(osz+ocp)){ret[0]=sz;ret[1]=ocp-(sz-osz);}else{ret=(size_t*)REALLOC(ret,sizeof(size_t)*2+sz*1.75);ret[0]=sz;ret[1]=(size_t)(sz*1.75)-sz;}}return&ret[2];}}
~~~~~~


~~~~~~C linenumbers
static inline size_t vlen(void*p){return p?0[(size_t*)p-2]:0;}
~~~~~~


~~~~~~C linenumbers
typedef struct set_item{struct set_item*next;uint64_t keyhash;void*key;void*super;}set_item;
~~~~~~


~~~~~~C linenumbers
typedef struct set{array(set_item*)array;int(*cmp)(void*,void*);uint64_t(*hash)(void*);int count;}set;
~~~~~~


~~~~~~C linenumbers
API void(set_init)(set*m);
~~~~~~


~~~~~~C linenumbers
API void(set_free)(set*m);
~~~~~~


~~~~~~C linenumbers
API void(set_insert)(set*m,set_item*p,void*key,uint64_t keyhash,void*super);
~~~~~~


~~~~~~C linenumbers
API void(set_erase)(set*m,void*key,uint64_t keyhash);
~~~~~~


~~~~~~C linenumbers
API void*(set_find)(const set*m,void*key,uint64_t keyhash);
~~~~~~


~~~~~~C linenumbers
API int(set_count)(const set*m);
~~~~~~


~~~~~~C linenumbers
API void(set_gc)(set*m);
~~~~~~


~~~~~~C linenumbers
typedef struct pair{struct pair*next;uint64_t keyhash;void*key;void*value;void*super;}pair;
~~~~~~


~~~~~~C linenumbers
typedef struct map{array(pair*)array;int(*cmp)(void*,void*);uint64_t(*hash)(void*);int count;}map;
~~~~~~


~~~~~~C linenumbers
API void(map_init)(map*m);
~~~~~~


~~~~~~C linenumbers
API void(map_free)(map*m);
~~~~~~


~~~~~~C linenumbers
API void(map_insert)(map*m,pair*p,void*key,void*value,uint64_t keyhash,void*super);
~~~~~~


~~~~~~C linenumbers
API void(map_erase)(map*m,void*key,uint64_t keyhash);
~~~~~~


~~~~~~C linenumbers
API void*(map_find)(map*m,void*key,uint64_t keyhash);
~~~~~~


~~~~~~C linenumbers
API int(map_count)(map*m);
~~~~~~


~~~~~~C linenumbers
API void(map_gc)(map*m);
~~~~~~

## string


~~~~~~C linenumbers
API char*stringf(const char*fmt,...);
~~~~~~


~~~~~~C linenumbers
API char*stringf_cat(char*x,const char*buf);
~~~~~~


~~~~~~C linenumbers
API int strmatch(const char*s,const char*wildcard);
~~~~~~


~~~~~~C linenumbers
API int strcmp_qsort(const void*a,const void*b);
~~~~~~


~~~~~~C linenumbers
API int strcmpi_qsort(const void*a,const void*b);
~~~~~~


~~~~~~C linenumbers
API bool strbegi(const char*src,const char*sub);
~~~~~~


~~~~~~C linenumbers
API bool strendi(const char*src,const char*sub);
~~~~~~


~~~~~~C linenumbers
API const char*strstri(const char*src,const char*sub);
~~~~~~


~~~~~~C linenumbers
API char*strrepl(char**copy,const char*target,const char*replace);
~~~~~~


~~~~~~C linenumbers
API char*strswap(char*copy,const char*target,const char*replace);
~~~~~~


~~~~~~C linenumbers
API char*strcut(char*copy,const char*target);
~~~~~~


~~~~~~C linenumbers
API char*str16to8(const wchar_t*str);
~~~~~~


~~~~~~C linenumbers
API const char*strlerp(unsigned numpairs,const char**pairs,const char*str);
~~~~~~


~~~~~~C linenumbers
API size_t strlcat(char*dst,const char*src,size_t dstcap);
~~~~~~


~~~~~~C linenumbers
API size_t strlcpy(char*dst,const char*src,size_t dstcap);
~~~~~~


~~~~~~C linenumbers
API array(char*)strsplit(const char*string,const char*delimiters);
~~~~~~


~~~~~~C linenumbers
API char*strjoin(array(char*)list,const char*separator);
~~~~~~

## profile


~~~~~~C linenumbers
struct profile_t{double stat;int32_t cost,avg;};
~~~~~~


~~~~~~C linenumbers
typedef map(char*,struct profile_t)profiler_t;
~~~~~~


~~~~~~C linenumbers
extern API profiler_t profiler;
~~~~~~

